(function(){var e={8013:function(e,t,a){"use strict";a.a(e,(async function(e,s){try{a(4114);var n=a(3173),o=a(9128),i=a(2517),r=a(5983),l=a(3232),d=a(1219),c=a(8704),u=e([n,r]);[n,r]=u.then?(await u)():u,t.A={components:{AppHeader:i.A,AppSidebar:o.A,LoginModal:r.A,SuggestSetPasswordModal:l.A},data(){return{currentView:null,userVerified:null,isSidebarVisible:!0,showSuggestPasswordModal:!1,windowWidth:window.innerWidth,cancelTokenSource:n.A.CancelToken.source()}},computed:{sidebarMarginLeft(){return this.isSidebarVisible?"200px":"0"}},mounted(){this.updateSidebarVisibility(),window.addEventListener("resize",this.updateSidebarVisibility),this.initializeUserVerification()},watch:{"$route.name":"loadCurrentView"},beforeUnmount(){window.removeEventListener("resize",this.updateSidebarVisibility)},methods:{async initializeUserVerification(){try{const e=await n.A.get("/api/verify-token");if(200===e.status){this.userVerified=!0;const t=e.data.no_password,a="true"===localStorage.getItem("noPasswordPromptDisabled");t&&!a&&(this.showSuggestPasswordModal=!0),await this.checkCsrfToken(),this.loadCurrentView(this.$route.name)}else this.checkPassword()}catch(e){this.checkPassword()}},async checkPassword(){try{const e=await n.A.post("/api/auth",{});if(200===e.status){this.userVerified=!0;const t=e.data.no_password;localStorage.setItem("noPassword",JSON.stringify(e.data.no_password));const a="true"===localStorage.getItem("noPasswordPromptDisabled");t&&!a&&(this.showSuggestPasswordModal=!0),await this.checkCsrfToken(),this.loadCurrentView(this.$route.name)}}catch(e){401===e.response?.status?this.userVerified=!1:403===e.response?.status?(this.userVerified=!1,d.nk.error("登录失败次数过多，请稍后再试")):d.nk.error("请求失败："+e.message)}},async checkCsrfToken(){const e=await(await fetch("/config.json")).json(),t=e.enable_https;let a=c.A.get("XSRF-TOKEN");if(a)n.A.defaults.headers.common["X-XSRF-TOKEN"]=a;else{const e=await n.A.get("/api/get-csrf-token");if(200===e.status){const a=e.data.csrf_token;if(a){c.A.set("XSRF-TOKEN",a,{expires:60/1440,sameSite:"Strict",secure:t});let e=c.A.get("XSRF-TOKEN");n.A.defaults.headers.common["X-XSRF-TOKEN"]=e}}}},updateSidebarVisibility(){this.windowWidth=window.innerWidth,this.isSidebarVisible=this.windowWidth>1024},handleMenuSelect(e){const t=`${e.charAt(0).toUpperCase()+e.slice(1)}View`;a(4235)(`./${t}.vue`).then((t=>{this.currentView=t.default,this.$router.push({name:e})}))},toggleSidebar(){this.windowWidth<=1024&&(this.isSidebarVisible=!this.isSidebarVisible)},closeSidebar(){this.isSidebarVisible=!1},loadCurrentView(e){if(this.userVerified){const t={dashboard:"Dashboard",config:"Config",data:"Data",logs:"Logs",chat:"Chat",setting:"Setting",about:"About"},s=t[e]||"Empty";a(9470)(`./${s}View.vue`).then((e=>{this.currentView=e.default}))}}}},s()}catch(h){s(h)}}))},8853:function(e,t,a){"use strict";a.a(e,(async function(e,s){try{var n=a(3173),o=a(1219),i=a(8704),r=a(5931),l=e([n]);n=(l.then?(await l)():l)[0],t.A={data(){const{t:e}=(0,r.s9)();return{password:"",rememberDevice:!1,loading:!1,showTooltip:!1,t:e}},methods:{async checkPassword(){this.loading=!0;try{const e=await n.A.post("/api/auth",{password:this.password,remember:this.rememberDevice});200===e.status&&(o.nk.success(this.t("login.message.success")),localStorage.setItem("noPassword","false"),i.A.remove("XSRF-TOKEN"),location.reload())}catch(e){401===e.response?.status?o.nk.error(this.t("login.message.failed")):403===e.response?.status?o.nk.error(this.t("login.message.abuse")):o.nk.error(this.t("message.error.fetch")+e.message)}finally{this.loading=!1}}}},s()}catch(d){s(d)}}))},4236:function(e,t,a){"use strict";a.a(e,(async function(e,s){try{a(4114),a(7642),a(8004),a(3853),a(5876),a(2475),a(5024),a(1698),a(8992),a(3949),a(1454),a(8872);var n=a(1219),o=a(5931),i=a(3173),r=a(9671),l=e([i]);i=(l.then?(await l)():l)[0],t.A={data(){const{t:e}=(0,o.s9)();return{t:e,trendData:[],selectedDays:"1",count:0,averageCount:0,changeRate:0,commandStats:[],chartInstance:null,resizeObserver:null,cancelTokenSource:i.A.CancelToken.source(),loading:!1}},mounted(){this.fetchAnalyticsData(this.selectedDays),this.resizeObserver=new ResizeObserver((()=>{this.resizeChart()})),this.resizeObserver.observe(this.$refs.chartContainer)},beforeUnmount(){this.cancelTokenSource.cancel("Component unmounted"),this.resizeObserver&&this.$refs.chartContainer&&(this.resizeObserver.unobserve(this.$refs.chartContainer),this.resizeObserver.disconnect()),this.chartInstance&&this.chartInstance.dispose()},methods:{async fetchAnalyticsData(e){this.loading=!0;try{const t=await i.A.get("/api/analytics",{cancelToken:this.cancelTokenSource.token,params:{days:e}}),{data:a}=t;this.processData(a,e),this.renderChart(e)}catch(t){i.A.isCancel(t)?console.log("Request canceled"):n.nk.error(this.t("message.error.fetch")+t.message)}finally{this.loading=!1}},processData(e,t){const a=this.groupDataByTimeInterval(e.data);this.fillMissingData(a,t),this.trendData=a.map((e=>({date:this.formatTimestamp(e.date),count:e.count}))).sort(((e,t)=>new Date(e.date)-new Date(t.date))),this.count=a.reduce(((e,t)=>e+t.count),0),this.averageCount=Math.round(this.count/t),this.changeRate=Math.floor(100*e.change_rate);const s={};e.data.forEach((e=>{const t=e.target_id?.split("|")[0]||this.t("unknown");s[t]=(s[t]||0)+1}));const n=Object.entries(s).map((([e,t])=>({prefix:e,count:t}))).sort(((e,t)=>t.count-e.count));this.commandStats=n},fillMissingData(e,t){const a=this.generateAllTimeIntervals(t),s=new Set(e.map((e=>e.date)));a.forEach((t=>{s.has(t)||e.push({date:t,count:0})})),e.sort(((e,t)=>new Date(e.date)-new Date(t.date)))},generateAllTimeIntervals(e){const t=[],a=new Date,s=48*e,n=new Date(a.getTime()-18e5);for(let o=0;o<s;o++){const e=new Date(n.getTime()-30*o*60*1e3);t.push(e.toISOString())}return t},groupDataByTimeInterval(e){const t={},a=new Date,s=new Date(a.getTime()-18e5);return e.forEach((e=>{const a=new Date(e.timestamp),n=s.getTime()-a.getTime(),o=Math.floor(n/18e5),i=new Date(s.getTime()-30*o*60*1e3),r=i.toISOString();t[r]||(t[r]={date:r,count:0}),t[r].count+=1})),Object.values(t)},formatTimestamp(e){const t=new Date(e);return t.toLocaleString([],{year:"numeric",month:"numeric",day:"numeric",hour:"2-digit",minute:"2-digit",hour12:!1}).replace(",","")},renderChart(){this.$nextTick((()=>{this.chartInstance&&this.chartInstance.dispose();const e=this.$refs.chartContainer;if(!e||0===e.offsetWidth)return;const t=r.Ts(this.$refs.chartContainer),a={tooltip:{trigger:"axis"},dataZoom:[{type:"slider",start:0,end:100},{type:"inside",start:0,end:100}],xAxis:{type:"category",data:this.trendData.map((e=>e.date))},yAxis:{type:"value"},series:[{name:this.t("dashboard.analytics.command.chart.command"),data:this.trendData.map((e=>e.count)),type:"line",smooth:!0}]};t.setOption(a),this.chartInstance=t}))},resizeChart(){this.$nextTick((()=>{this.chartInstance&&this.chartInstance.resize()}))},onTimeRangeChange(e){this.fetchAnalyticsData(e)},getColorByIndex(e){const t=["#F56C6C","#E6A23C","#FAE384","#67C23A","#1ABC9C","#409EFF","#9B59B6","#E84393"];let a=0;for(let s=0;s<e.length;s++)a+=e.charCodeAt(s);return t[a%t.length]}}},s()}catch(d){s(d)}}))},1083:function(e,t,a){"use strict";a.a(e,(async function(e,s){try{var n=a(3173),o=a(1219),i=a(5931),r=e([n]);n=(r.then?(await r)():r)[0];const l=["#1989fa","#e6a23c","#f56c6c"];t.A={data(){const{t:e}=(0,i.s9)();return{os:{system:"",version:"",machine:"",boot_time:0},bot:{running_time:0,python_version:"",version:"",web_render_status:!1},cpu:{cpu_brand:"",cpu_percent:0},memory:{total:0,used:0,percent:0},disk:{total:0,used:0,percent:0},cancelTokenSource:n.A.CancelToken.source(),loading:!1,t:e}},mounted(){this.fetchServerInfoData(this.selectedDays)},beforeUnmount(){this.cancelTokenSource.cancel("Component unmounted")},methods:{formatRunningTime(e){const t=Math.floor(e/3600),a=Math.floor(e%3600/60),s=Math.floor(e%60);return this.t("dashboard.server_info.text.format_time",{hours:t,minutes:a,seconds:s})},formatTime(e){const t=new Date(1e3*e);return t.toLocaleString("zh-CN",{hour12:!1,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"})},async fetchServerInfoData(){try{this.loading=!0;const e=await n.A.get("/api/server-info",{cancelToken:this.cancelTokenSource.token}),t=e.data;this.os={...this.os,...t.os},this.bot={...this.bot,...t.bot},this.cpu={...this.cpu,...t.cpu},this.memory={...this.memory,...t.memory},this.disk={...this.disk,...t.disk}}catch(e){n.A.isCancel(e)?console.log("Request canceled"):o.nk.error(this.t("message.error.fetch")+e.message)}finally{this.loading=!1}},getProgressColor(e){return e>=90?l[2]:e>=60?l[1]:l[0]}}},s()}catch(l){s(l)}}))},5216:function(e,t,a){"use strict";a.a(e,(async function(e,s){try{var n=a(3173),o=a(2933),i=a(5320),r=a(1219),l=a(5931),d=e([n]);n=(d.then?(await d)():d)[0],t.A={name:"restartBotButton",data(){const{t:e}=(0,l.s9)();return{t:e,pollingTimeout:6e4,pollingInterval:2e3,hasShownTimeoutError:!1}},methods:{async handleRestart(){try{await o.s.confirm(this.t("confirm.message"),this.t("confirm.warning"),{confirmButtonText:this.t("button.confirm"),cancelButtonText:this.t("button.cancel"),type:"warning"}),await this.restartBot()}catch(e){return}},async restartBot(){try{const e=await n.A.post("/api/restart",{});if(200===e.status){i.Ks.service({fullscreen:!0,text:this.t("setting.restart_bot.loading.text")});const e=Date.now(),t=async()=>{try{const e=await n.A.get("/api");if(200!==e.status)throw new Error("Not ready");window.location.href="/"}catch(a){const s=Date.now()-e;s>=this.pollingTimeout&&!this.hasShownTimeoutError&&(this.hasShownTimeoutError=!0,(0,r.nk)({message:this.t("setting.restart_bot.message.failed"),type:"error",duration:0})),setTimeout(t,this.pollingInterval)}};this.hasShownTimeoutError=!1,setTimeout(t,this.pollingInterval)}}catch(e){r.nk.error(this.t("message.error.fetch")+e.message)}}}},s()}catch(c){s(c)}}))},2058:function(e,t,a){"use strict";a.a(e,(async function(e,s){try{var n=a(3173),o=a(8814),i=a(4838),r=a(8954),l=a(5242),d=a(1219),c=a(5931),u=e([n]);n=(u.then?(await u)():u)[0],t.A={name:"ConfigView",data(){const{t:e}=(0,c.s9)();return{activeTab:"",configFiles:[],editorContent:"",editorView:null,editorOptions:{lineWrapping:!0,theme:l.bM,lineNumbers:!0,scrollbarStyle:"native"},fileContents:{},cancelTokenSource:n.A.CancelToken.source(),loading:!1,t:e}},mounted(){this.fetchConfigFiles();const e=r.$t.create({doc:this.editorContent,extensions:[i.oQ,l.bM,o.Lz.updateListener.of(this.handleEditorChange)]});this.editorView=new o.Lz({state:e,parent:this.$refs.editor})},beforeUnmount(){this.cancelTokenSource.cancel("Component unmounted")},methods:{async fetchConfigFiles(){this.loading=!0;try{const e=await n.A.get("/api/config",{cancelToken:this.cancelTokenSource.token});this.configFiles=e.data.cfg_files,this.configFiles.length>0&&(this.activeTab=this.configFiles[0],this.fetchConfig(this.activeTab))}catch(e){n.A.isCancel(e)?console.log("Request canceled"):d.nk.error(this.t("message.error.fetch")+e.message)}finally{this.loading=!1}},async fetchConfig(e,t=!1){if(!t&&this.fileContents[e])return this.editorContent=this.fileContents[e],void this.updateEditorContent();try{const t=await n.A.get(`/api/config/${e}`,{cancelToken:this.cancelTokenSource.token});this.fileContents[e]=t.data.content,this.editorContent=t.data.content,this.updateEditorContent()}catch(a){n.A.isCancel(a)?console.log("Request canceled"):d.nk.error(this.t("message.error.fetch")+a.message)}},resetConfig(){this.fetchConfig(this.activeTab,!0)},async applyConfig(){try{await n.A.post(`/api/config/${this.activeTab}`,{content:this.editorContent}),d.nk.success(this.t("config.message.save.success"))}catch(e){d.nk.error(this.t("message.error.fetch")+e.message)}},updateEditorContent(){this.editorView&&this.editorView.dispatch({changes:{from:0,to:this.editorView.state.doc.length,insert:this.editorContent}})},handleTabClick(e){this.fetchConfig(e.paneName)},handleEditorChange(e){const t=e.state.doc.toString();this.editorContent!==t&&(this.editorContent=t,this.fileContents[this.activeTab]=t)}}},s()}catch(h){s(h)}}))},6656:function(e,t,a){"use strict";a.a(e,(async function(e,s){try{var n=a(7292),o=a(1997),i=e([n,o]);[n,o]=i.then?(await i)():i,t.A={components:{AnalyticsCard:n.A,ServerInfoCard:o.A},methods:{refreshData(){if(this.loading=!0,this.$refs.serverInfoCard.fetchServerInfoData().finally((()=>{this.loading=!1})),this.$refs.analyticsCard){const e=this.$refs.analyticsCard.selectedDays;this.$refs.analyticsCard.fetchAnalyticsData(e)}}}},s()}catch(r){s(r)}}))},8712:function(e,t,a){"use strict";a.a(e,(async function(e,s){try{var n=a(2217),o=a(1719),i=a(3858),r=e([i]);i=(r.then?(await r)():r)[0],t.A={components:{ChangePassword:n.A,SelectLanguage:o.A,RestartBot:i.A}},s()}catch(l){s(l)}}))},6820:function(e,t,a){"use strict";a.d(t,{X:function(){return o}});var s=a(6768),n=a(4232);function o(e,t,a,o,i,r){const l=(0,s.g2)("el-button");return(0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.Lk)("h3",null,(0,n.v_)(e.$t("setting.restart_bot.title")),1),(0,s.bF)(l,{type:"danger",onClick:r.handleRestart},{default:(0,s.k6)((()=>[(0,s.eW)((0,n.v_)(e.$t("setting.restart_bot.button.restart")),1)])),_:1},8,["onClick"])],64)}},1841:function(e,t,a){"use strict";a.d(t,{X:function(){return n}});var s=a(6768);function n(e,t,a,n,o,i){const r=(0,s.g2)("ServerInfoCard"),l=(0,s.g2)("AnalyticsCard"),d=(0,s.g2)("el-button");return(0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.bF)(r,{ref:"serverInfoCard"},null,512),(0,s.bF)(l,{ref:"analyticsCard"},null,512),(0,s.bF)(d,{class:"refresh-button",circle:"",size:"large",type:"primary",onClick:i.refreshData},{default:(0,s.k6)((()=>t[0]||(t[0]=[(0,s.Lk)("i",{class:"mdi mdi-refresh"},null,-1)]))),_:1},8,["onClick"])],64)}},8985:function(e,t,a){"use strict";a.d(t,{X:function(){return n}});var s=a(6768);function n(e,t,a,n,o,i){const r=(0,s.g2)("ChangePassword"),l=(0,s.g2)("SelectLanguage"),d=(0,s.g2)("RestartBot");return(0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.bF)(r),(0,s.bF)(l),(0,s.bF)(d)],64)}},3173:function(e,t,a){"use strict";a.a(e,(async function(e,s){try{var n=a(4373);const e=async()=>{const e=await fetch("/config.json"),t=await e.json(),a=t.api_url;return n.A.defaults.baseURL=a,n.A.defaults.timeout=5e4,n.A.defaults.withCredentials=!0,n.A.interceptors.request.use((e=>e),(e=>Promise.reject(e))),n.A.interceptors.response.use((e=>e),(e=>Promise.reject(e))),n.A},o=await e();t.A=o,s()}catch(o){s(o)}}),1)},1406:function(e,t,a){"use strict";a.a(e,(async function(e,t){try{var s=a(5130),n=a(5931),o=a(7067),i=a(9342),r=a(3081),l=(a(4188),a(1862),a(4016)),d=a(8312),c=a(186),u=e([o,i]);[o,i]=u.then?(await u)():u,fetch("/config.json").then((e=>e.json())).then((e=>{const t=e.locale||"zh_cn";localStorage.getItem("language")||localStorage.setItem("language",t);const a=(0,n.hU)({locale:localStorage.getItem("language"),messages:{zh_cn:l,zh_tw:d,en_us:c}}),u=(0,s.Ef)(o.A);u.use(r.A),u.use(a),u.use(i.A);const h="true"===localStorage.getItem("isDarkMode");document.documentElement.classList.toggle("dark",h),u.mount("#app")})),t()}catch(h){t(h)}}))},9342:function(e,t,a){"use strict";a.a(e,(async function(e,s){try{var n=a(1387),o=a(3778),i=a(6246),r=a(5461),l=a(8595),d=a(6579),c=a(9390),u=a(1673),h=e([o,i,c]);[o,i,c]=h.then?(await h)():h;const g=[{path:"/webui/dashboard",name:"dashboard",component:o["default"]},{path:"/webui/config",name:"config",component:i["default"]},{path:"/webui/data",name:"data",component:r["default"]},{path:"/webui/logs",name:"logs",component:l["default"]},{path:"/webui/chat",name:"chat",component:d["default"]},{path:"/webui/setting",name:"setting",component:c["default"]},{path:"/webui/about",name:"about",component:u["default"]},{path:"/webui/:pathMatch(.*)*",redirect:"/webui/dashboard"}],m=(0,n.aE)({history:(0,n.LA)(),routes:g});t.A=m,s()}catch(g){s(g)}}))},7067:function(e,t,a){"use strict";a.a(e,(async function(e,s){try{var n=a(1326),o=a(8598),i=(a(6512),a(1241)),r=e([o]);o=(r.then?(await r)():r)[0];const l=(0,i.A)(o.A,[["render",n.X],["__scopeId","data-v-779a96f4"]]);t.A=l,s()}catch(l){s(l)}}))},2517:function(e,t,a){"use strict";a.d(t,{A:function(){return g}});var s=a(6768),n=a(4232),o=a(6031);const i={class:"header-left"},r={class:"header-right"};function l(e,t,a,l,d,c){const u=(0,s.g2)("el-button"),h=(0,s.g2)("el-header");return(0,s.uX)(),(0,s.Wv)(h,{class:"header"},{default:(0,s.k6)((()=>[(0,s.Lk)("div",i,[d.screenWidth<1024?((0,s.uX)(),(0,s.Wv)(u,{key:0,class:"menu-button",onClick:c.switchSidebar},{default:(0,s.k6)((()=>t[0]||(t[0]=[(0,s.Lk)("i",{class:"mdi mdi-menu"},null,-1)]))),_:1},8,["onClick"])):(0,s.Q3)("",!0),t[1]||(t[1]=(0,s.Lk)("div",{class:"logo"},[(0,s.Lk)("img",{src:o,alt:"Logo",class:"logo-image"}),(0,s.Lk)("span",{class:"web-ui-text"},"WebUI ")],-1))]),(0,s.Lk)("div",r,[(0,s.bF)(u,{class:"help-button",onClick:c.goToHelp},{default:(0,s.k6)((()=>[(0,s.eW)((0,n.v_)(e.$t("header.button.doc")),1)])),_:1},8,["onClick"]),(0,s.bF)(u,{class:"theme-toggle-button",onClick:c.toggleDarkMode},{default:(0,s.k6)((()=>[(0,s.Lk)("i",{class:(0,n.C4)(d.isDarkMode?"mdi mdi-weather-sunny":"mdi mdi-weather-night")},null,2)])),_:1},8,["onClick"])])])),_:1})}var d=a(5931),c={name:"AppHeader",emits:["toggle-sidebar"],data(){const{t:e}=(0,d.s9)();return{t:e,isDarkMode:!1,screenWidth:window.innerWidth}},mounted(){const e=localStorage.getItem("isDarkMode");null!==e&&(this.isDarkMode=JSON.parse(e)),window.addEventListener("resize",this.updateScreenWidth)},beforeUnmount(){window.removeEventListener("resize",this.updateScreenWidth)},methods:{updateScreenWidth(){this.screenWidth=window.innerWidth},goToHelp(){window.open("https://bot.teahouse.team","_blank")},toggleDarkMode(){this.isDarkMode=!this.isDarkMode,document.documentElement.classList.toggle("dark",this.isDarkMode),localStorage.setItem("isDarkMode",JSON.stringify(this.isDarkMode))},switchSidebar(){this.$emit("toggle-sidebar")}}},u=a(1241);const h=(0,u.A)(c,[["render",l],["__scopeId","data-v-7faf6bd1"]]);var g=h},5983:function(e,t,a){"use strict";a.a(e,(async function(e,s){try{var n=a(1024),o=a(4922),i=(a(661),a(1241)),r=e([o]);o=(r.then?(await r)():r)[0];const l=(0,i.A)(o.A,[["render",n.X],["__scopeId","data-v-2b690746"]]);t.A=l,s()}catch(l){s(l)}}))},9128:function(e,t,a){"use strict";a.d(t,{A:function(){return c}});var s=a(6768),n=a(4232);function o(e,t,a,o,i,r){const l=(0,s.g2)("el-menu-item"),d=(0,s.g2)("el-menu"),c=(0,s.g2)("el-aside");return(0,s.uX)(),(0,s.Wv)(c,{width:"200px",class:"sidebar"},{default:(0,s.k6)((()=>[(0,s.bF)(d,{"default-active":i.activeMenu,class:"sidebar-menu",onSelect:r.handleSelect},{default:(0,s.k6)((()=>[(0,s.bF)(l,{index:"dashboard"},{default:(0,s.k6)((()=>[t[0]||(t[0]=(0,s.Lk)("i",{class:"mdi mdi-view-dashboard"},null,-1)),(0,s.Lk)("span",null,(0,n.v_)(e.$t("sidebar.item.dashboard")),1)])),_:1}),(0,s.bF)(l,{index:"config"},{default:(0,s.k6)((()=>[t[1]||(t[1]=(0,s.Lk)("i",{class:"mdi mdi-cog"},null,-1)),(0,s.Lk)("span",null,(0,n.v_)(e.$t("sidebar.item.config")),1)])),_:1}),(0,s.bF)(l,{index:"data"},{default:(0,s.k6)((()=>[t[2]||(t[2]=(0,s.Lk)("i",{class:"mdi mdi-database"},null,-1)),(0,s.Lk)("span",null,(0,n.v_)(e.$t("sidebar.item.data")),1)])),_:1}),(0,s.bF)(l,{index:"logs"},{default:(0,s.k6)((()=>[t[3]||(t[3]=(0,s.Lk)("i",{class:"mdi mdi-console"},null,-1)),(0,s.Lk)("span",null,(0,n.v_)(e.$t("sidebar.item.logs")),1)])),_:1}),(0,s.bF)(l,{index:"chat"},{default:(0,s.k6)((()=>[t[4]||(t[4]=(0,s.Lk)("i",{class:"mdi mdi-chat"},null,-1)),(0,s.Lk)("span",null,(0,n.v_)(e.$t("sidebar.item.chat")),1)])),_:1}),(0,s.bF)(l,{index:"setting"},{default:(0,s.k6)((()=>[t[5]||(t[5]=(0,s.Lk)("i",{class:"mdi mdi-tune"},null,-1)),(0,s.Lk)("span",null,(0,n.v_)(e.$t("sidebar.item.setting")),1)])),_:1}),(0,s.bF)(l,{index:"about"},{default:(0,s.k6)((()=>[t[6]||(t[6]=(0,s.Lk)("i",{class:"mdi mdi-information-outline"},null,-1)),(0,s.Lk)("span",null,(0,n.v_)(e.$t("sidebar.item.about")),1)])),_:1})])),_:1},8,["default-active","onSelect"])])),_:1})}a(4114);var i=a(5931),r={name:"AppSidebar",data(){const{t:e}=(0,i.s9)();return{t:e,activeMenu:this.getActiveMenuFromRoute()}},methods:{getActiveMenuFromRoute(){const e=["dashboard","config","data","logs","chat","setting","about"],t=this.$route.name;return e.includes(t)?t:""},handleSelect(e){this.activeMenu=e,this.$router.push({name:e})}},watch:{"$route.name":function(){this.activeMenu=this.getActiveMenuFromRoute()}}},l=a(1241);const d=(0,l.A)(r,[["render",o],["__scopeId","data-v-5737e6e3"]]);var c=d},3232:function(e,t,a){"use strict";a.d(t,{A:function(){return c}});var s=a(6768),n=a(4232);function o(e,t,a,o,i,r){const l=(0,s.g2)("el-checkbox"),d=(0,s.g2)("el-button"),c=(0,s.g2)("el-dialog");return(0,s.uX)(),(0,s.Wv)(c,{title:e.$t("suggest_set_password.title"),modelValue:r.dialogVisible,"onUpdate:modelValue":t[1]||(t[1]=e=>r.dialogVisible=e),width:"400px","align-center":""},{footer:(0,s.k6)((()=>[(0,s.bF)(d,{onClick:r.handleClose},{default:(0,s.k6)((()=>[(0,s.eW)((0,n.v_)(e.$t("suggest_set_password.button.cancel")),1)])),_:1},8,["onClick"]),(0,s.bF)(d,{type:"primary",onClick:r.goToSetting},{default:(0,s.k6)((()=>[(0,s.eW)((0,n.v_)(e.$t("suggest_set_password.button.confirm")),1)])),_:1},8,["onClick"])])),default:(0,s.k6)((()=>[(0,s.Lk)("p",null,(0,n.v_)(e.$t("suggest_set_password.text")),1),(0,s.bF)(l,{modelValue:i.noMorePrompt,"onUpdate:modelValue":t[0]||(t[0]=e=>i.noMorePrompt=e)},{default:(0,s.k6)((()=>[(0,s.eW)((0,n.v_)(e.$t("suggest_set_password.checkbox.no_more_prompt")),1)])),_:1},8,["modelValue"])])),_:1},8,["title","modelValue"])}a(4114);var i=a(5931),r={props:{modelValue:Boolean},emits:["update:modelValue"],data(){const{t:e}=(0,i.s9)();return{t:e,noMorePrompt:!1}},computed:{dialogVisible:{get(){return this.modelValue},set(e){this.$emit("update:modelValue",e)}}},methods:{handleClose(){this.noMorePrompt&&localStorage.setItem("noPasswordPromptDisabled","true"),this.dialogVisible=!1},goToSetting(){this.noMorePrompt&&localStorage.setItem("noPasswordPromptDisabled","true"),this.dialogVisible=!1,this.$router.push({name:"setting"})}}},l=a(1241);const d=(0,l.A)(r,[["render",o]]);var c=d},7292:function(e,t,a){"use strict";a.a(e,(async function(e,s){try{var n=a(6157),o=a(5365),i=(a(8982),a(1241)),r=e([o]);o=(r.then?(await r)():r)[0];const l=(0,i.A)(o.A,[["render",n.X],["__scopeId","data-v-5c3ac30a"]]);t.A=l,s()}catch(l){s(l)}}))},1997:function(e,t,a){"use strict";a.a(e,(async function(e,s){try{var n=a(4326),o=a(220),i=(a(8806),a(1241)),r=e([o]);o=(r.then?(await r)():r)[0];const l=(0,i.A)(o.A,[["render",n.X],["__scopeId","data-v-5ed824c0"]]);t.A=l,s()}catch(l){s(l)}}))},2217:function(e,t,a){"use strict";a.d(t,{A:function(){return b}});var s=a(6768),n=a(4232);const o={class:"password-buttons"};function i(e,t,a,i,r,l){const d=(0,s.g2)("el-input"),c=(0,s.g2)("el-form-item"),u=(0,s.g2)("el-button"),h=(0,s.g2)("el-form");return(0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.Lk)("h3",null,(0,n.v_)(e.$t("setting.change_password.title")),1),(0,s.bF)(h,{model:r.form,rules:r.rules,ref:"formRef","label-width":"auto"},{default:(0,s.k6)((()=>[r.noPassword?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.Wv)(c,{key:0,label:e.$t("setting.change_password.input.old_password"),prop:"old_password"},{default:(0,s.k6)((()=>[(0,s.bF)(d,{modelValue:r.form.old_password,"onUpdate:modelValue":t[0]||(t[0]=e=>r.form.old_password=e),type:"password"},null,8,["modelValue"])])),_:1},8,["label"])),r.noPassword?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.Wv)(c,{key:1,label:e.$t("setting.change_password.input.new_password"),prop:"new_password"},{default:(0,s.k6)((()=>[(0,s.bF)(d,{modelValue:r.form.new_password,"onUpdate:modelValue":t[1]||(t[1]=e=>r.form.new_password=e),type:"password"},null,8,["modelValue"])])),_:1},8,["label"])),r.noPassword?((0,s.uX)(),(0,s.Wv)(c,{key:2,label:e.$t("setting.change_password.input.set_password"),prop:"new_password"},{default:(0,s.k6)((()=>[(0,s.bF)(d,{modelValue:r.form.new_password,"onUpdate:modelValue":t[2]||(t[2]=e=>r.form.new_password=e),type:"password"},null,8,["modelValue"])])),_:1},8,["label"])):(0,s.Q3)("",!0),(0,s.bF)(c,{label:e.$t("setting.change_password.input.confirm_password"),prop:"confirm_password"},{default:(0,s.k6)((()=>[(0,s.bF)(d,{modelValue:r.form.confirm_password,"onUpdate:modelValue":t[3]||(t[3]=e=>r.form.confirm_password=e),type:"password"},null,8,["modelValue"])])),_:1},8,["label"]),r.noPassword?((0,s.uX)(),(0,s.Wv)(c,{key:3},{default:(0,s.k6)((()=>[(0,s.bF)(u,{type:"primary",onClick:l.handleUpdatePassword},{default:(0,s.k6)((()=>[(0,s.eW)((0,n.v_)(e.$t("setting.change_password.button.set_password")),1)])),_:1},8,["onClick"])])),_:1})):(0,s.Q3)("",!0),r.noPassword?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.Wv)(c,{key:4},{default:(0,s.k6)((()=>[(0,s.Lk)("div",o,[(0,s.bF)(u,{type:"primary",onClick:l.handleUpdatePassword},{default:(0,s.k6)((()=>[(0,s.eW)((0,n.v_)(e.$t("setting.change_password.button.update_password")),1)])),_:1},8,["onClick"]),(0,s.bF)(u,{type:"danger",onClick:l.handleClearPassword},{default:(0,s.k6)((()=>[(0,s.eW)((0,n.v_)(e.$t("setting.change_password.button.clear_password")),1)])),_:1},8,["onClick"])])])),_:1}))])),_:1},8,["model","rules"])],64)}var r=a(1219),l=a(2933),d=a(5931),c=a(4373),u=a(8704),h={data(){const{t:e}=(0,d.s9)();return{form:{old_password:"",new_password:"",confirm_password:""},noPassword:!1,rules:{old_password:[{required:!0,message:this.$t("setting.change_password.validate.old_password"),trigger:"blur"}],new_password:[{required:!0,message:this.$t("setting.change_password.validate.new_password"),trigger:"blur"}],confirm_password:[{required:!0,message:this.$t("setting.change_password.validate.confirm_password"),trigger:"blur"},{validator:(e,t,a)=>{t!==this.form.new_password?a(new Error(this.$t("setting.change_password.validate.inconsistent"))):a()},trigger:"blur"}]},t:e}},mounted(){this.noPassword="true"===localStorage.getItem("noPassword")},methods:{async handleUpdatePassword(){try{try{await this.$refs.formRef.validate()}catch{return}const e={new_password:this.form.new_password};this.noPassword||(e.password=this.form.old_password);const t=await c.A.post("/api/change-password",e);200===t.status&&(u.A.remove("XSRF-TOKEN"),location.reload())}catch(e){401===e.response?.status?r.nk.error(this.$t("setting.change_password.message.failed")):r.nk.error(this.$t("message.error.fetch")+e.message)}},async handleClearPassword(){try{await this.$refs.formRef.validateField("old_password"),l.s.confirm(this.$t("setting.change_password.confirm.message"),this.$t("confirm.warning"),{confirmButtonText:this.$t("button.confirm"),cancelButtonText:this.$t("button.cancel"),type:"warning"}).then((async()=>{await this.confirmClearPassword()})).catch((()=>{}))}catch{return}},async confirmClearPassword(){try{const e={password:this.form.old_password},t=await c.A.post("/api/clear-password",e);200===t.status&&(r.nk.success(this.$t("setting.change_password.message.success.clear")),localStorage.removeItem("noPasswordPromptDisabled"),u.A.remove("XSRF-TOKEN"),location.reload())}catch(e){401===e.response?.status?r.nk.error(this.$t("setting.change_password.message.failed")):r.nk.error(this.$t("message.error.fetch")+e.message)}}}},g=a(1241);const m=(0,g.A)(h,[["render",i],["__scopeId","data-v-15db212a"]]);var b=m},3858:function(e,t,a){"use strict";a.a(e,(async function(e,s){try{var n=a(6820),o=a(2207),i=a(1241),r=e([o]);o=(r.then?(await r)():r)[0];const l=(0,i.A)(o.A,[["render",n.X]]);t.A=l,s()}catch(l){s(l)}}))},1719:function(e,t,a){"use strict";a.d(t,{A:function(){return c}});var s=a(6768),n=a(4232);function o(e,t,a,o,i,r){const l=(0,s.g2)("el-option"),d=(0,s.g2)("el-select");return(0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.Lk)("h3",null,(0,n.v_)(e.$t("setting.select_language.title")),1),(0,s.bF)(d,{modelValue:i.currentLang,"onUpdate:modelValue":t[0]||(t[0]=e=>i.currentLang=e),onChange:r.changeLanguage,class:"lang-select",style:{width:"100px","margin-right":"10px"}},{default:(0,s.k6)((()=>[(0,s.bF)(l,{label:"简体中文",value:"zh_cn"}),(0,s.bF)(l,{label:"繁體中文",value:"zh_tw"}),(0,s.bF)(l,{label:"English",value:"en_us"})])),_:1},8,["modelValue","onChange"])],64)}var i=a(5931),r={name:"LanguageSelector",data(){const{t:e}=(0,i.s9)();return{t:e,currentLang:localStorage.getItem("language")||"zh_cn"}},methods:{changeLanguage(e){this.currentLang=e,this.$i18n.locale=e,localStorage.setItem("language",e)}}},l=a(1241);const d=(0,l.A)(r,[["render",o],["__scopeId","data-v-85e36798"]]);var c=d},1673:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return k}});var s=a(6768),n=a(4232),o=a(6031);const i={class:"container"},r={class:"quote"},l={class:"repo-buttons"},d={class:"github-link"},c=["title"],u={class:"github-link"},h=["title"],g={class:"other-links"};function m(e,t,a,m,b,p){const f=(0,s.g2)("el-button");return(0,s.uX)(),(0,s.CE)("div",i,[t[4]||(t[4]=(0,s.Lk)("img",{width:"300",src:o,alt:"Akaribot"},null,-1)),t[5]||(t[5]=(0,s.Lk)("h1",{class:"title"},"小可 · AkariBot",-1)),(0,s.Lk)("span",r,(0,n.v_)(e.$t("about.quote")),1),t[6]||(t[6]=(0,s.Lk)("span",{class:"text"},[(0,s.eW)("By "),(0,s.Lk)("a",{href:"https://github.com/OasisAkari"},"OasisAkari"),(0,s.eW)(" via "),(0,s.Lk)("a",{href:"https://teahouse.team"},"Teahouse Studios")],-1)),(0,s.Lk)("div",l,[(0,s.Lk)("div",d,[(0,s.bF)(f,{class:"repo-button",onClick:p.goToRepo},{default:(0,s.k6)((()=>[t[0]||(t[0]=(0,s.Lk)("i",{class:"fab fa-github"},null,-1)),(0,s.Lk)("span",null,(0,n.v_)(e.$t("about.button.repo.main")),1)])),_:1},8,["onClick"]),(0,s.Lk)("img",{src:"https://img.shields.io/github/stars/Teahouse-Studios/akari-bot?style=social",alt:"Repo Stars",title:e.$t("about.star.tooltip")},null,8,c)]),(0,s.Lk)("div",u,[(0,s.bF)(f,{class:"repo-button",onClick:p.goToWebUIRepo},{default:(0,s.k6)((()=>[t[1]||(t[1]=(0,s.Lk)("i",{class:"fab fa-github"},null,-1)),(0,s.Lk)("span",null,(0,n.v_)(e.$t("about.button.repo.webui")),1)])),_:1},8,["onClick"]),(0,s.Lk)("img",{src:"https://img.shields.io/github/stars/Teahouse-Studios/akari-bot-webui?style=social",alt:"Repo Stars",title:e.$t("about.star.tooltip")},null,8,h)])]),(0,s.Lk)("div",g,[(0,s.bF)(f,{class:"locale-button",onClick:p.goToI18N},{default:(0,s.k6)((()=>[t[2]||(t[2]=(0,s.Lk)("i",{class:"mdi mdi-translate"},null,-1)),(0,s.Lk)("span",null,(0,n.v_)(e.$t("about.button.locale")),1)])),_:1},8,["onClick"]),(0,s.bF)(f,{class:"sponsor-button",onClick:p.goToSponsor},{default:(0,s.k6)((()=>[t[3]||(t[3]=(0,s.Lk)("i",{class:"mdi mdi-heart-outline"},null,-1)),(0,s.Lk)("span",null,(0,n.v_)(e.$t("about.button.sponsor")),1)])),_:1},8,["onClick"])]),t[7]||(t[7]=(0,s.Lk)("span",{class:"footer-text"},"Made with love❤️ and Python🐍.",-1))])}var b=a(5931),p={name:"AboutView",data(){const{t:e}=(0,b.s9)();return{t:e}},methods:{updateScreenWidth(){this.screenWidth=window.innerWidth},goToRepo(){window.open("https://github.com/Teahouse-Studios/akari-bot","_blank")},goToWebUIRepo(){window.open("https://github.com/Teahouse-Studios/akari-bot-webui","_blank")},goToI18N(){window.open("https://crowdin.com/project/akari-bot","_blank")},goToSponsor(){window.open("https://afdian.com/a/teahouse","_blank")}}},f=a(1241);const _=(0,f.A)(p,[["render",m],["__scopeId","data-v-0fdd4df8"]]);var k=_},6579:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return P}});var s=a(6768),n=a(4232),o=a(5130);const i={class:"chat-container"},r={class:"chat-header"},l=["title"],d={class:"chat-title"},c={class:"chat-box",ref:"chatBox"},u={key:0,class:"chat-placeholder"},h={class:"placeholder-title"},g={class:"placeholder-sub"},m={class:"placeholder-sub"},b={class:"placeholder-sub"},p={class:"placeholder-sub"},f={class:"placeholder-sub"},_=["data-id"],k=["innerHTML"],v={key:0,class:"debug-uuid"},w={class:"send-box"},y=["src"];function C(e,t,a,C,x,L){const F=(0,s.g2)("el-button"),S=(0,s.g2)("el-input"),V=(0,s.g2)("el-dialog");return(0,s.uX)(),(0,s.CE)("div",i,[(0,s.Lk)("div",r,[(0,s.Lk)("div",{style:(0,n.Tr)({backgroundColor:"connected"===x.connectionStatus?"limegreen":"connecting"===x.connectionStatus?"orange":"red"}),class:"connection-indicator",title:"connected"===x.connectionStatus?e.$t("chat.status.tooltip.connected"):"connecting"===x.connectionStatus?e.$t("chat.status.tooltip.connecting"):e.$t("chat.status.tooltip.disconnected")},null,12,l),(0,s.Lk)("div",d,"# "+(0,n.v_)(e.$t("chat.title")),1),(0,s.bF)(F,{class:"reset-button",onClick:L.resetChat,title:e.$t("chat.button.reset"),circle:""},{default:(0,s.k6)((()=>t[3]||(t[3]=[(0,s.Lk)("i",{class:"mdi mdi-restart"},null,-1)]))),_:1},8,["onClick","title"])]),(0,s.Lk)("div",c,[0===x.messages.length?((0,s.uX)(),(0,s.CE)("div",u,[(0,s.Lk)("div",h,(0,n.v_)(e.$t("chat.chatbox.title")),1),x.isMobileView?((0,s.uX)(),(0,s.CE)(s.FK,{key:1},[(0,s.Lk)("div",p,[(0,s.eW)((0,n.v_)(e.$t("chat.chatbox.text.prompt1.prefix"))+" ",1),t[7]||(t[7]=(0,s.Lk)("code",{class:"chat-code"},"~help",-1)),(0,s.eW)(" "+(0,n.v_)(e.$t("chat.chatbox.text.prompt1.suffix")),1)]),(0,s.Lk)("div",f,[(0,s.eW)((0,n.v_)(e.$t("chat.chatbox.text.prompt3.prefix"))+" ",1),t[8]||(t[8]=(0,s.Lk)("code",{class:"chat-code"},"Enter",-1)),(0,s.eW)(" "+(0,n.v_)(e.$t("chat.chatbox.text.prompt3.suffix")),1)])],64)):((0,s.uX)(),(0,s.CE)(s.FK,{key:0},[(0,s.Lk)("div",g,[(0,s.eW)((0,n.v_)(e.$t("chat.chatbox.text.prompt1.prefix"))+" ",1),t[4]||(t[4]=(0,s.Lk)("code",{class:"chat-code"},"~help",-1)),(0,s.eW)(" "+(0,n.v_)(e.$t("chat.chatbox.text.prompt1.suffix")),1)]),(0,s.Lk)("div",m,[(0,s.eW)((0,n.v_)(e.$t("chat.chatbox.text.prompt2.prefix"))+" ",1),t[5]||(t[5]=(0,s.Lk)("code",{class:"chat-code"},"Enter",-1)),(0,s.eW)(" "+(0,n.v_)(e.$t("chat.chatbox.text.prompt2.suffix")),1)]),(0,s.Lk)("div",b,[(0,s.eW)((0,n.v_)(e.$t("chat.chatbox.text.prompt3.prefix"))+" ",1),t[6]||(t[6]=(0,s.Lk)("code",{class:"chat-code"},"Shift + Enter",-1)),(0,s.eW)(" "+(0,n.v_)(e.$t("chat.chatbox.text.prompt3.suffix")),1)])],64))])):(0,s.Q3)("",!0),((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(x.messages,((e,a)=>((0,s.uX)(),(0,s.CE)("div",{key:e.id||a,class:(0,n.C4)(["chat-message",e.from]),"data-id":e.id},[(0,s.Lk)("div",{innerHTML:e.html,onClick:t[0]||(t[0]=(...e)=>L.handleMarkdownClick&&L.handleMarkdownClick(...e))},null,8,k),x.debug?((0,s.uX)(),(0,s.CE)("div",v,(0,n.v_)(e.id),1)):(0,s.Q3)("",!0)],10,_)))),128))],512),(0,s.Lk)("div",w,[(0,s.bF)(S,{modelValue:x.inputText,"onUpdate:modelValue":t[1]||(t[1]=e=>x.inputText=e),placeholder:e.$t("chat.input.send"),onKeydown:(0,o.jR)(L.handleEnterKey,["enter"]),class:"chat-send-input",type:"textarea",resize:"none",clearable:"",autosize:"",disabled:"connected"!=x.connectionStatus},null,8,["modelValue","placeholder","onKeydown","disabled"]),(0,s.bF)(F,{type:"primary",onClick:L.sendMessage,style:{"margin-left":"10px"},disabled:"connected"!=x.connectionStatus||""===x.inputText.trim()},{default:(0,s.k6)((()=>[(0,s.eW)((0,n.v_)(e.$t("chat.button.send")),1)])),_:1},8,["onClick","disabled"])]),(0,s.bF)(V,{modelValue:x.imageDialogVisible,"onUpdate:modelValue":t[2]||(t[2]=e=>x.imageDialogVisible=e),class:"image-preview-dialog","show-close":!1,center:!0},{default:(0,s.k6)((()=>[(0,s.Lk)("img",{src:x.previewImageSrc,style:{width:"100%",height:"100%"}},null,8,y)])),_:1},8,["modelValue"])])}a(4114),a(8992),a(4520),a(1454),a(4603),a(7566),a(8721);var x=a(4373),L=a(1219),F=a(2933),S=a(642),V=a(9096),$=a.n(V),A=a(4963),T=a(5931),D={name:"ChatView",data(){const{t:e}=(0,T.s9)(),t=new S.A("zero").set({html:!1,linkify:!0,breaks:!0}).use($(),{pattern:/^(https?:)?\/\//,attrs:{target:"_blank",rel:"noopener noreferrer"}}).use((e=>{e.enable(["blockquote","fence","heading","list"]),e.enable(["autolink","backticks","emphasis","escape","link","linkify","newline","strikethrough","text"]),e.renderer.rules.paragraph_open=()=>"",e.renderer.rules.paragraph_close=()=>"<br />",e.renderer.rules.fence=(t,a)=>{const s=t[a].content;return`<pre class="chat-pre">${e.utils.escapeHtml(s)}</pre>`},e.renderer.rules.code_inline=(t,a)=>{const s=t[a].content;return`<code class="chat-code">${e.utils.escapeHtml(s)}</code>`},e.renderer.rules.blockquote_open=()=>'<blockquote class="chat-blockquote">'}));return{inputText:"",messages:[],chatBox:null,websocket:null,connectionStatus:"connecting",imageDialogVisible:!1,isMobileView:window.innerWidth<1024,previewImageSrc:"",cancelTokenSource:x.A.CancelToken.source(),debug:!1,md:t,t:e}},methods:{async connectWebSocket(){this.connectionStatus="connecting";try{const e=await(await fetch("/config.json")).json(),t=e.enable_https;let a=e.api_url;/^https?:\/\//i.test(a)||(a=(t?"https://":"http://")+a);const s=new URL(a),n="https:"===s.protocol?"wss:":"ws:",o=`${n}//${s.hostname}:${s.port}/ws/chat`;this.websocket=new WebSocket(o),this.websocket.onopen=()=>{this.connectionStatus="connected"},this.websocket.onmessage=e=>{const t=JSON.parse(e.data);"delete"===t.action&&Array.isArray(t.id)?this.messages=this.messages.filter((e=>!t.id.includes(e.id))):"send"===t.action&&(this.messages.push({from:"bot",text:this.renderResponse(t.message),html:this.renderMarkdown(this.renderResponse(t.message)),id:t.id||(0,A.A)()}),this.scrollToBottom())},this.websocket.onerror=()=>{this.connectionStatus="disconnected",L.nk.error(this.t("message.error.connect.server"))}}catch(e){this.connectionStatus="disconnected",L.nk.error(this.t("message.error.connect")+e.message)}},async authenticateToken(){try{const e=await x.A.get("/api/verify-token",{cancelToken:this.cancelTokenSource.token});200===e.status?this.connectWebSocket():(this.connectionStatus="disconnected",L.nk.error(this.t("message.error.connect.auth")))}catch(e){x.A.isCancel(e)?console.log("Request canceled"):(this.connectionStatus="disconnected",L.nk.error(this.t("message.error.fetch")+e.message))}},sendMessage(){const e=this.inputText.trim();if(!e)return;const t=(0,A.A)();this.messages.push({from:"user",text:e,html:this.renderMarkdown(e),id:t}),this.websocket?.send(JSON.stringify({action:"send",message:[{type:"text",content:e}],id:t})),this.inputText="",this.scrollToBottom()},resetChat(){this.connectionStatus="connecting",this.messages=[],this.websocket&&this.websocket.readyState===WebSocket.OPEN&&this.websocket.close(),this.authenticateToken()},scrollToBottom(){setTimeout((()=>{this.chatBox&&(this.chatBox.scrollTop=this.chatBox.scrollHeight)}),0)},handleResize(){this.isMobileView=window.innerWidth<1024},handleEnterKey(e){this.isMobileView||e.shiftKey||(e.preventDefault(),this.sendMessage())},renderMarkdown(e){return this.md.render(e).replace(/\[image:([^\]]+)\]/g,((e,t)=>`<img src="${t}" class="chat-img" />`))},handleMarkdownClick(e){const t=e.target;"A"===t.tagName?(e.preventDefault(),this.confirmExternalLink(t.href)):"IMG"===t.tagName&&this.showImagePreview(t.src)},confirmExternalLink(e){F.s.confirm(this.$t("chat.external_link.confirm.message",{url:e}),this.$t("chat.external_link.confirm.title"),{confirmButtonText:this.$t("yes"),cancelButtonText:this.$t("no"),type:"warning"}).then((()=>{window.open(e,"_blank")})).catch((()=>{console.log("Link blocked")}))},renderResponse(e){return Array.isArray(e)?e.map((e=>{if("text"===e.type)return e.content;if("image"===e.type){const t=e.content;return t.startsWith("data:image/png;base64,")||t.startsWith("data:image/jpeg;base64,")||t.startsWith("data:image/gif;base64,")?`[image:${t}]`:""}return""})).join("\n"):e},showImagePreview(e){this.previewImageSrc=e,this.imageDialogVisible=!0}},mounted(){this.chatBox=this.$refs.chatBox,this.authenticateToken(),window.addEventListener("resize",this.handleResize)},beforeUnmount(){this.websocket&&this.websocket.close(),this.cancelTokenSource.cancel("Component unmounted"),window.removeEventListener("resize",this.handleResize)}},W=a(1241);const I=(0,W.A)(D,[["render",C],["__scopeId","data-v-33d86dec"]]);var P=I},6246:function(e,t,a){"use strict";a.a(e,(async function(e,s){try{a.r(t);var n=a(4573),o=a(5875),i=(a(4972),a(1241)),r=e([o]);o=(r.then?(await r)():r)[0];const l=(0,i.A)(o.A,[["render",n.X],["__scopeId","data-v-77915f54"]]);t["default"]=l,s()}catch(l){s(l)}}))},3778:function(e,t,a){"use strict";a.a(e,(async function(e,s){try{a.r(t);var n=a(1841),o=a(7375),i=(a(6489),a(1241)),r=e([o]);o=(r.then?(await r)():r)[0];const l=(0,i.A)(o.A,[["render",n.X],["__scopeId","data-v-15aec8b6"]]);t["default"]=l,s()}catch(l){s(l)}}))},5461:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return E}});var s=a(6768);const n={key:0},o={key:1};function i(e,t,a,i,r,l){const d=(0,s.g2)("el-button"),c=(0,s.g2)("el-button-group"),u=(0,s.g2)("SessionManager"),h=(0,s.g2)("UserManager");return(0,s.uX)(),(0,s.CE)("div",null,[(0,s.bF)(c,{class:"mb-4"},{default:(0,s.k6)((()=>[(0,s.bF)(d,{type:"session"===i.activeCard?"primary":"default",onClick:t[0]||(t[0]=e=>i.activeCard="session")},{default:(0,s.k6)((()=>t[2]||(t[2]=[(0,s.Lk)("i",{class:"mdi mdi-forum"},null,-1)]))),_:1},8,["type"]),(0,s.bF)(d,{type:"user"===i.activeCard?"primary":"default",onClick:t[1]||(t[1]=e=>i.activeCard="user")},{default:(0,s.k6)((()=>t[3]||(t[3]=[(0,s.Lk)("i",{class:"mdi mdi-account"},null,-1)]))),_:1},8,["type"])])),_:1}),"session"===i.activeCard?((0,s.uX)(),(0,s.CE)("div",n,[(0,s.bF)(u)])):((0,s.uX)(),(0,s.CE)("div",o,[(0,s.bF)(h)]))])}var r=a(144),l=a(4232);const d={class:"header-container"},c={class:"filter-container"},u={class:"filter-item"},h={class:"filter-item"},g={class:"filter-item"},m={class:"tag-container"},b={class:"tag-container"},p={class:"tag-container"};function f(e,t,a,n,o,i){const r=(0,s.g2)("el-button"),f=(0,s.g2)("el-option"),_=(0,s.g2)("el-select"),k=(0,s.g2)("el-input"),v=(0,s.g2)("el-table-column"),w=(0,s.g2)("el-tag"),y=(0,s.g2)("el-popover"),C=(0,s.g2)("el-table"),x=(0,s.g2)("el-pagination"),L=(0,s.g2)("el-dialog"),F=(0,s.g2)("el-card"),S=(0,s.g2)("el-form-item"),V=(0,s.g2)("el-col"),$=(0,s.g2)("el-switch"),A=(0,s.g2)("el-row"),T=(0,s.g2)("el-form"),D=(0,s.gN)("loading");return(0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.bF)(F,{class:"session-card"},{default:(0,s.k6)((()=>[(0,s.Lk)("div",d,[(0,s.Lk)("h3",null,(0,l.v_)(e.$t("data.session.title")),1),(0,s.bF)(r,{onClick:i.refreshData,type:"primary",style:{float:"right","margin-left":"10px"}},{default:(0,s.k6)((()=>[t[16]||(t[16]=(0,s.Lk)("i",{class:"mdi mdi-refresh"},null,-1)),(0,s.eW)(" "+(0,l.v_)(e.$t("data.button.refresh")),1)])),_:1},8,["onClick"])]),(0,s.Lk)("div",c,[(0,s.Lk)("div",u,[(0,s.bF)(_,{modelValue:o.selectedPrefix,"onUpdate:modelValue":t[0]||(t[0]=e=>o.selectedPrefix=e),clearable:"",placeholder:e.$t("data.select.prefix"),onChange:i.debouncedRefresh},{default:(0,s.k6)((()=>[(0,s.bF)(f,{label:"QQ",value:"QQ"}),(0,s.bF)(f,{label:"QQBot",value:"QQBot"}),(0,s.bF)(f,{label:"Discord",value:"Discord"}),(0,s.bF)(f,{label:"Telegram",value:"Telegram"}),(0,s.bF)(f,{label:"KOOK",value:"KOOK"}),(0,s.bF)(f,{label:"Matrix",value:"Matrix"}),(0,s.bF)(f,{label:"Web",value:"Web"}),(0,s.bF)(f,{label:"TEST",value:"TEST"})])),_:1},8,["modelValue","placeholder","onChange"])]),(0,s.Lk)("div",h,[(0,s.bF)(_,{modelValue:o.selectedStatus,"onUpdate:modelValue":t[1]||(t[1]=e=>o.selectedStatus=e),clearable:"",placeholder:e.$t("data.select.status"),onChange:i.debouncedRefresh},{default:(0,s.k6)((()=>[(0,s.bF)(f,{label:e.$t("data.session.tag.muted"),value:"muted"},null,8,["label"]),(0,s.bF)(f,{label:e.$t("data.session.tag.blocked"),value:"blocked"},null,8,["label"])])),_:1},8,["modelValue","placeholder","onChange"])]),(0,s.Lk)("div",g,[(0,s.bF)(k,{modelValue:o.platformIdPart,"onUpdate:modelValue":t[2]||(t[2]=e=>o.platformIdPart=e),placeholder:e.$t("data.session.input.target_id"),onInput:i.debouncedRefresh},null,8,["modelValue","placeholder","onInput"])])]),(0,s.bo)(((0,s.uX)(),(0,s.Wv)(C,{data:o.targetList,style:{width:"100%"},stripe:""},{default:(0,s.k6)((()=>[(0,s.bF)(v,{prop:"target_id",label:e.$t("data.session.table.target_id"),sortable:"","min-width":"140"},null,8,["label"]),(0,s.bF)(v,{prop:"locale",label:e.$t("data.session.table.locale"),sortable:"","min-width":"100"},null,8,["label"]),(0,s.bF)(v,{prop:"modules",label:e.$t("data.session.table.modules"),"min-width":"160"},{default:(0,s.k6)((({row:a})=>[(0,s.eW)((0,l.v_)(a.modules.length)+" ",1),a.modules.length>0?((0,s.uX)(),(0,s.Wv)(r,{key:0,size:"small",type:"primary",style:{"margin-left":"5px"},onClick:e=>i.viewModules(a)},{default:(0,s.k6)((()=>[t[17]||(t[17]=(0,s.Lk)("i",{class:"mdi mdi-eye"},null,-1)),(0,s.eW)(" "+(0,l.v_)(e.$t("data.button.view")),1)])),_:2},1032,["onClick"])):(0,s.Q3)("",!0)])),_:1},8,["label"]),(0,s.bF)(v,{label:e.$t("data.session.table.custom_admins"),"min-width":"160"},{default:(0,s.k6)((({row:a})=>[(0,s.eW)((0,l.v_)(a.custom_admins.length)+" ",1),a.custom_admins.length>0?((0,s.uX)(),(0,s.Wv)(r,{key:0,size:"small",type:"primary",style:{"margin-left":"5px"},onClick:e=>i.viewAdmins(a)},{default:(0,s.k6)((()=>[t[18]||(t[18]=(0,s.Lk)("i",{class:"mdi mdi-eye"},null,-1)),(0,s.eW)(" "+(0,l.v_)(e.$t("data.button.view")),1)])),_:2},1032,["onClick"])):(0,s.Q3)("",!0)])),_:1},8,["label"]),(0,s.bF)(v,{label:e.$t("data.session.table.banned_users"),"min-width":"160"},{default:(0,s.k6)((({row:a})=>[(0,s.eW)((0,l.v_)(a.banned_users.length)+" ",1),a.banned_users.length>0?((0,s.uX)(),(0,s.Wv)(r,{key:0,size:"small",type:"primary",style:{"margin-left":"5px"},onClick:e=>i.viewBanned(a)},{default:(0,s.k6)((()=>[t[19]||(t[19]=(0,s.Lk)("i",{class:"mdi mdi-eye"},null,-1)),(0,s.eW)(" "+(0,l.v_)(e.$t("data.button.view")),1)])),_:2},1032,["onClick"])):(0,s.Q3)("",!0)])),_:1},8,["label"]),(0,s.bF)(v,{label:e.$t("data.table.status"),"min-width":"180"},{default:(0,s.k6)((({row:t})=>[t.muted?((0,s.uX)(),(0,s.Wv)(w,{key:0,type:"warning"},{default:(0,s.k6)((()=>[(0,s.eW)((0,l.v_)(e.$t("data.session.tag.muted")),1)])),_:1})):(0,s.Q3)("",!0),t.blocked?((0,s.uX)(),(0,s.Wv)(w,{key:1,type:"danger",style:{"margin-left":"5px"}},{default:(0,s.k6)((()=>[(0,s.eW)((0,l.v_)(e.$t("data.session.tag.blocked")),1)])),_:1})):(0,s.Q3)("",!0)])),_:1},8,["label"]),(0,s.bF)(v,{label:e.$t("data.session.table.target_data"),"min-width":"140"},{default:(0,s.k6)((({row:t})=>[(0,s.bF)(y,{placement:"top",width:"300",trigger:"hover"},{reference:(0,s.k6)((()=>[(0,s.bF)(r,{size:"mini",type:"text"},{default:(0,s.k6)((()=>[(0,s.eW)((0,l.v_)(e.$t("data.table.text.detail")),1)])),_:1})])),default:(0,s.k6)((()=>[(0,s.Lk)("pre",null,(0,l.v_)(JSON.stringify(t.target_data,null,2)),1)])),_:2},1024)])),_:1},8,["label"]),(0,s.bF)(v,{label:e.$t("data.session.table.operation"),"min-width":"240"},{default:(0,s.k6)((({row:a})=>[(0,s.bF)(r,{size:"small",type:"warning",onClick:e=>i.editTarget(a)},{default:(0,s.k6)((()=>[t[20]||(t[20]=(0,s.Lk)("i",{class:"mdi mdi-pencil"},null,-1)),(0,s.eW)(" "+(0,l.v_)(e.$t("data.button.edit")),1)])),_:2},1032,["onClick"]),(0,s.bF)(r,{size:"small",type:"danger",onClick:e=>i.confirmDelete(a)},{default:(0,s.k6)((()=>[t[21]||(t[21]=(0,s.Lk)("i",{class:"mdi mdi-delete"},null,-1)),(0,s.eW)(" "+(0,l.v_)(e.$t("data.button.delete")),1)])),_:2},1032,["onClick"])])),_:1},8,["label"])])),_:1},8,["data"])),[[D,o.loading]]),o.totalItems>0?((0,s.uX)(),(0,s.Wv)(x,{key:0,background:"",layout:"prev, pager, next","current-page":o.currentPage,"onUpdate:currentPage":t[3]||(t[3]=e=>o.currentPage=e),"page-size":o.pageSize,total:o.totalItems,style:{"margin-top":"20px"},onCurrentChange:i.handlePageChange},null,8,["current-page","page-size","total","onCurrentChange"])):(0,s.Q3)("",!0),(0,s.bF)(L,{modelValue:o.moduleDialogVisible,"onUpdate:modelValue":t[4]||(t[4]=e=>o.moduleDialogVisible=e),title:e.$t("data.session.table.modules")},{default:(0,s.k6)((()=>[(0,s.Lk)("div",m,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(o.selectedModules,(e=>((0,s.uX)(),(0,s.Wv)(w,{key:e,style:{margin:"4px"},type:"info",round:""},{default:(0,s.k6)((()=>[(0,s.eW)((0,l.v_)(e),1)])),_:2},1024)))),128))])])),_:1},8,["modelValue","title"]),(0,s.bF)(L,{modelValue:o.adminDialogVisible,"onUpdate:modelValue":t[5]||(t[5]=e=>o.adminDialogVisible=e),title:e.$t("data.session.table.custom_admins")},{default:(0,s.k6)((()=>[(0,s.Lk)("div",b,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(o.selectedAdmins,(e=>((0,s.uX)(),(0,s.Wv)(w,{key:e,style:{margin:"4px"},type:"info",round:""},{default:(0,s.k6)((()=>[(0,s.eW)((0,l.v_)(e),1)])),_:2},1024)))),128))])])),_:1},8,["modelValue","title"]),(0,s.bF)(L,{modelValue:o.bannedDialogVisible,"onUpdate:modelValue":t[6]||(t[6]=e=>o.bannedDialogVisible=e),title:e.$t("data.session.table.banned_users")},{default:(0,s.k6)((()=>[(0,s.Lk)("div",p,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(o.selectedBanned,(e=>((0,s.uX)(),(0,s.Wv)(w,{key:e,style:{margin:"4px"},type:"info",round:""},{default:(0,s.k6)((()=>[(0,s.eW)((0,l.v_)(e),1)])),_:2},1024)))),128))])])),_:1},8,["modelValue","title"])])),_:1}),(0,s.bF)(L,{modelValue:o.editDialogVisible,"onUpdate:modelValue":t[15]||(t[15]=e=>o.editDialogVisible=e),title:e.$t("data.session.title.edit_target_data"),width:"600px"},{footer:(0,s.k6)((()=>[(0,s.bF)(r,{onClick:t[14]||(t[14]=e=>o.editDialogVisible=!1)},{default:(0,s.k6)((()=>[(0,s.eW)((0,l.v_)(e.$t("button.cancel")),1)])),_:1}),(0,s.bF)(r,{type:"primary",onClick:i.submitEdit},{default:(0,s.k6)((()=>[(0,s.eW)((0,l.v_)(e.$t("button.save")),1)])),_:1},8,["onClick"])])),default:(0,s.k6)((()=>[(0,s.bF)(T,{model:o.editForm,"label-width":"auto"},{default:(0,s.k6)((()=>[(0,s.bF)(V,{span:12},{default:(0,s.k6)((()=>[(0,s.bF)(S,{label:e.$t("data.session.table.locale")},{default:(0,s.k6)((()=>[(0,s.bF)(k,{modelValue:o.editForm.locale,"onUpdate:modelValue":t[7]||(t[7]=e=>o.editForm.locale=e)},null,8,["modelValue"])])),_:1},8,["label"])])),_:1}),(0,s.bF)(A,{gutter:24},{default:(0,s.k6)((()=>[(0,s.bF)(V,{span:6},{default:(0,s.k6)((()=>[(0,s.bF)(S,{label:e.$t("data.session.table.mute")},{default:(0,s.k6)((()=>[(0,s.bF)($,{modelValue:o.editForm.muted,"onUpdate:modelValue":t[8]||(t[8]=e=>o.editForm.muted=e)},null,8,["modelValue"])])),_:1},8,["label"])])),_:1}),(0,s.bF)(V,{span:6},{default:(0,s.k6)((()=>[(0,s.bF)(S,{label:e.$t("data.session.table.block")},{default:(0,s.k6)((()=>[(0,s.bF)($,{modelValue:o.editForm.blocked,"onUpdate:modelValue":t[9]||(t[9]=e=>o.editForm.blocked=e)},null,8,["modelValue"])])),_:1},8,["label"])])),_:1}),(0,s.bF)(V,{span:24},{default:(0,s.k6)((()=>[(0,s.bF)(S,{label:e.$t("data.session.table.modules_list")},{default:(0,s.k6)((()=>[(0,s.bF)(_,{modelValue:o.editForm.modules,"onUpdate:modelValue":t[10]||(t[10]=e=>o.editForm.modules=e),multiple:"",filterable:"","allow-create":"",placeholder:e.$t("data.session.input.modules"),style:{width:"100%"}},{default:(0,s.k6)((()=>[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(o.allModules,(e=>((0,s.uX)(),(0,s.Wv)(f,{key:e,label:e,value:e},null,8,["label","value"])))),128))])),_:1},8,["modelValue","placeholder"])])),_:1},8,["label"])])),_:1}),(0,s.bF)(V,{span:24},{default:(0,s.k6)((()=>[(0,s.bF)(S,{label:e.$t("data.session.table.custom_admins")},{default:(0,s.k6)((()=>[(0,s.bF)(_,{modelValue:o.editForm.custom_admins,"onUpdate:modelValue":t[11]||(t[11]=e=>o.editForm.custom_admins=e),multiple:"",filterable:"","allow-create":"","default-first-option":"",placeholder:e.$t("data.session.input.custom_admins"),style:{width:"100%"}},{default:(0,s.k6)((()=>[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(o.editForm.custom_admins,(e=>((0,s.uX)(),(0,s.Wv)(f,{key:e,label:e,value:e},null,8,["label","value"])))),128))])),_:1},8,["modelValue","placeholder"])])),_:1},8,["label"])])),_:1}),(0,s.bF)(V,{span:24},{default:(0,s.k6)((()=>[(0,s.bF)(S,{label:e.$t("data.session.table.banned_users")},{default:(0,s.k6)((()=>[(0,s.bF)(_,{modelValue:o.editForm.banned_users,"onUpdate:modelValue":t[12]||(t[12]=e=>o.editForm.banned_users=e),multiple:"",filterable:"","allow-create":"","default-first-option":"",placeholder:e.$t("data.session.input.banned_users"),style:{width:"100%"}},{default:(0,s.k6)((()=>[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(o.editForm.banned_users,(e=>((0,s.uX)(),(0,s.Wv)(f,{key:e,label:e,value:e},null,8,["label","value"])))),128))])),_:1},8,["modelValue","placeholder"])])),_:1},8,["label"])])),_:1}),(0,s.bF)(V,{span:24},{default:(0,s.k6)((()=>[(0,s.bF)(S,{label:e.$t("data.session.table.target_data")},{default:(0,s.k6)((()=>[(0,s.bF)(k,{type:"textarea",resize:"none",modelValue:o.targetDataString,"onUpdate:modelValue":t[13]||(t[13]=e=>o.targetDataString=e),rows:6,placeholder:e.$t("data.input.json_data")},null,8,["modelValue","placeholder"])])),_:1},8,["label"])])),_:1})])),_:1})])),_:1},8,["model"])])),_:1},8,["modelValue","title"])],64)}a(1454);var _=a(4373),k=a(1219),v=a(5931),w={data(){const{t:e}=(0,v.s9)();return{editForm:{target_id:"",locale:"",muted:!1,blocked:!1,modules:[],custom_admins:[],banned_users:[],target_data:{}},targetList:[],moduleDialogVisible:!1,adminDialogVisible:!1,bannedDialogVisible:!1,editDialogVisible:!1,selectedAdmins:[],selectedBanned:[],allModules:[],selectedModules:[],selectedPrefix:"",selectedStatus:"",platformIdPart:"",targetDataString:"",debounceTimer:null,currentPage:1,pageSize:20,totalItems:0,loading:!1,cancelTokenSource:_.A.CancelToken.source(),t:e}},mounted(){this.refreshData()},beforeUnmount(){this.cancelTokenSource.cancel("Component unmounted")},methods:{debouncedRefresh(){clearTimeout(this.debounceTimer),this.debounceTimer=setTimeout((()=>{this.refreshData()}),500)},async refreshData(){this.currentPage=1,await this.fetchData(),this.fetchAllModules()},viewModules(e){this.selectedModules=e.modules,this.moduleDialogVisible=!0},async fetchData(){this.loading=!0;try{const e=await _.A.get("/api/target",{cancelToken:this.cancelTokenSource.token,params:{prefix:this.selectedPrefix||void 0,status:this.selectedStatus||void 0,id:this.platformIdPart||void 0,page:this.currentPage,size:this.pageSize}});200===e.status&&(this.targetList=e.data.target_list.map((e=>(e.modules=Array.isArray(e.modules)?e.modules:[],e.custom_admins=Array.isArray(e.custom_admins)?e.custom_admins:[],e))),this.totalItems=e.data.total||0)}catch(e){_.A.isCancel(e)?console.log("Request canceled"):k.nk.error(this.t("message.error.fetch")+e)}finally{this.loading=!1}},async fetchAllModules(){try{const e=await _.A.get("/api/modules_list");200===e.status&&e.data.modules&&(this.allModules=Object.keys(e.data.modules))}catch(e){_.A.isCancel(e)?console.log("Request canceled"):k.nk.error(this.t("message.error.fetch")+e)}},handlePageChange(e){this.currentPage=e,this.fetchData()},viewAdmins(e){this.selectedAdmins=e.custom_admins||[],this.adminDialogVisible=!0},viewBanned(e){this.selectedBanned=e.banned_users||[],this.bannedDialogVisible=!0},editTarget(e){Object.assign(this.editForm,{target_id:e.target_id,locale:e.locale,muted:e.muted,blocked:e.blocked,modules:e.modules?[...e.modules]:[],custom_admins:e.custom_admins?[...e.custom_admins]:[],banned_users:e.banned_users?[...e.banned_users]:[],target_data:e.target_data?{...e.target_data}:{}}),this.targetDataString=JSON.stringify(this.editForm.target_data,null,2),this.editDialogVisible=!0},async submitEdit(){let e;try{e=JSON.parse(this.targetDataString)}catch(s){k.nk.error(this.t("data.message.invalid_json"))}const{target_id:t,...a}=this.editForm;a.target_data=e;try{await _.A.post(`/api/target/${t}/edit`,a),k.nk.success(this.t("data.message.success.edit")),this.editDialogVisible=!1,this.fetchData()}catch(n){k.nk.error(this.t("message.error.fetch")+n.message)}},confirmDelete(e){this.$confirm(this.t("data.session.confirm.message",{target_id:e.target_id}),this.t("confirm.warning"),{confirmButtonText:this.t("button.confirm"),cancelButtonText:this.t("button.cancel"),type:"warning"}).then((()=>{this.deleteTarget(e)})).catch((()=>{}))},async deleteTarget(e){try{await _.A.post(`/api/target/${e.target_id}/delete`),k.nk.success(this.t("data.message.success.delete")),this.fetchData()}catch(t){k.nk.error(this.t("message.error.fetch")+t.message)}}}},y=a(1241);const C=(0,y.A)(w,[["render",f],["__scopeId","data-v-bc86968a"]]);var x=C;const L={class:"header-container"},F={class:"filter-container"},S={class:"filter-item"},V={class:"filter-item"},$={class:"filter-item"};function A(e,t,a,n,o,i){const r=(0,s.g2)("el-button"),d=(0,s.g2)("el-option"),c=(0,s.g2)("el-select"),u=(0,s.g2)("el-input"),h=(0,s.g2)("el-table-column"),g=(0,s.g2)("el-tag"),m=(0,s.g2)("el-popover"),b=(0,s.g2)("el-table"),p=(0,s.g2)("el-pagination"),f=(0,s.g2)("el-card"),_=(0,s.g2)("el-switch"),k=(0,s.g2)("el-form-item"),v=(0,s.g2)("el-col"),w=(0,s.g2)("el-input-number"),y=(0,s.g2)("el-row"),C=(0,s.g2)("el-form"),x=(0,s.g2)("el-dialog"),A=(0,s.gN)("loading");return(0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.bF)(f,{class:"user-card"},{default:(0,s.k6)((()=>[(0,s.Lk)("div",L,[(0,s.Lk)("h3",null,(0,l.v_)(e.$t("data.user.title")),1),(0,s.bF)(r,{onClick:i.refreshData,type:"primary",style:{float:"right","margin-left":"10px"}},{default:(0,s.k6)((()=>[t[12]||(t[12]=(0,s.Lk)("i",{class:"mdi mdi-refresh"},null,-1)),(0,s.eW)(" "+(0,l.v_)(e.$t("data.button.refresh")),1)])),_:1},8,["onClick"])]),(0,s.Lk)("div",F,[(0,s.Lk)("div",S,[(0,s.bF)(c,{modelValue:o.selectedPrefix,"onUpdate:modelValue":t[0]||(t[0]=e=>o.selectedPrefix=e),clearable:"",placeholder:e.$t("data.select.prefix"),onChange:i.debouncedRefresh},{default:(0,s.k6)((()=>[(0,s.bF)(d,{label:"QQ",value:"QQ"}),(0,s.bF)(d,{label:"QQBot",value:"QQBot"}),(0,s.bF)(d,{label:"Discord",value:"Discord"}),(0,s.bF)(d,{label:"Telegram",value:"Telegram"}),(0,s.bF)(d,{label:"KOOK",value:"KOOK"}),(0,s.bF)(d,{label:"Matrix",value:"Matrix"}),(0,s.bF)(d,{label:"Web",value:"Web"}),(0,s.bF)(d,{label:"TEST",value:"TEST"})])),_:1},8,["modelValue","placeholder","onChange"])]),(0,s.Lk)("div",V,[(0,s.bF)(c,{modelValue:o.selectedStatus,"onUpdate:modelValue":t[1]||(t[1]=e=>o.selectedStatus=e),clearable:"",placeholder:e.$t("data.select.status"),onChange:i.debouncedRefresh},{default:(0,s.k6)((()=>[(0,s.bF)(d,{label:e.$t("data.user.tag.superuser"),value:"superuser"},null,8,["label"]),(0,s.bF)(d,{label:e.$t("data.user.tag.trusted"),value:"trusted"},null,8,["label"]),(0,s.bF)(d,{label:e.$t("data.user.tag.blocked"),value:"blocked"},null,8,["label"])])),_:1},8,["modelValue","placeholder","onChange"])]),(0,s.Lk)("div",$,[(0,s.bF)(u,{modelValue:o.platformIdPart,"onUpdate:modelValue":t[2]||(t[2]=e=>o.platformIdPart=e),placeholder:e.$t("data.user.input.sender_id"),onInput:i.debouncedRefresh},null,8,["modelValue","placeholder","onInput"])])]),(0,s.bo)(((0,s.uX)(),(0,s.Wv)(b,{data:o.senderList,style:{width:"100%"},stripe:""},{default:(0,s.k6)((()=>[(0,s.bF)(h,{prop:"sender_id",label:e.$t("data.user.table.sender_id"),sortable:"","min-width":"140"},null,8,["label"]),(0,s.bF)(h,{prop:"warns",label:e.$t("data.user.table.warns"),sortable:"","min-width":"140"},null,8,["label"]),(0,s.bF)(h,{prop:"petal",label:e.$t("data.user.table.petal"),sortable:"","min-width":"140"},null,8,["label"]),(0,s.bF)(h,{label:e.$t("data.table.status"),"min-width":"180"},{default:(0,s.k6)((({row:t})=>[t.superuser?((0,s.uX)(),(0,s.Wv)(g,{key:0,type:"primary"},{default:(0,s.k6)((()=>[(0,s.eW)((0,l.v_)(e.$t("data.user.tag.superuser")),1)])),_:1})):(0,s.Q3)("",!0),t.trusted?((0,s.uX)(),(0,s.Wv)(g,{key:1,type:"success",style:{"margin-left":"5px"}},{default:(0,s.k6)((()=>[(0,s.eW)((0,l.v_)(e.$t("data.user.tag.trusted")),1)])),_:1})):(0,s.Q3)("",!0),t.blocked?((0,s.uX)(),(0,s.Wv)(g,{key:2,type:"danger",style:{"margin-left":"5px"}},{default:(0,s.k6)((()=>[(0,s.eW)((0,l.v_)(e.$t("data.user.tag.blocked")),1)])),_:1})):(0,s.Q3)("",!0)])),_:1},8,["label"]),(0,s.bF)(h,{label:e.$t("data.user.table.sender_data"),"min-width":"140"},{default:(0,s.k6)((({row:t})=>[(0,s.bF)(m,{placement:"top",width:"300",trigger:"hover"},{reference:(0,s.k6)((()=>[(0,s.bF)(r,{size:"mini",type:"text"},{default:(0,s.k6)((()=>[(0,s.eW)((0,l.v_)(e.$t("data.table.text.detail")),1)])),_:1})])),default:(0,s.k6)((()=>[(0,s.Lk)("pre",null,(0,l.v_)(JSON.stringify(t.sender_data,null,2)),1)])),_:2},1024)])),_:1},8,["label"]),(0,s.bF)(h,{label:e.$t("data.session.table.operation"),"min-width":"240"},{default:(0,s.k6)((({row:a})=>[(0,s.bF)(r,{size:"small",type:"warning",onClick:e=>i.editSender(a)},{default:(0,s.k6)((()=>[t[13]||(t[13]=(0,s.Lk)("i",{class:"mdi mdi-pencil"},null,-1)),(0,s.eW)(" "+(0,l.v_)(e.$t("data.button.edit")),1)])),_:2},1032,["onClick"]),(0,s.bF)(r,{size:"small",type:"danger",onClick:e=>i.confirmDelete(a)},{default:(0,s.k6)((()=>[t[14]||(t[14]=(0,s.Lk)("i",{class:"mdi mdi-delete"},null,-1)),(0,s.eW)(" "+(0,l.v_)(e.$t("data.button.delete")),1)])),_:2},1032,["onClick"])])),_:1},8,["label"])])),_:1},8,["data"])),[[A,o.loading]]),o.totalItems>0?((0,s.uX)(),(0,s.Wv)(p,{key:0,background:"",layout:"prev, pager, next","current-page":o.currentPage,"onUpdate:currentPage":t[3]||(t[3]=e=>o.currentPage=e),"page-size":o.pageSize,total:o.totalItems,style:{"margin-top":"20px"},onCurrentChange:i.handlePageChange},null,8,["current-page","page-size","total","onCurrentChange"])):(0,s.Q3)("",!0)])),_:1}),(0,s.bF)(x,{modelValue:o.editDialogVisible,"onUpdate:modelValue":t[11]||(t[11]=e=>o.editDialogVisible=e),title:e.$t("data.user.title.edit_sender_data"),width:"600px"},{footer:(0,s.k6)((()=>[(0,s.bF)(r,{onClick:t[10]||(t[10]=e=>o.editDialogVisible=!1)},{default:(0,s.k6)((()=>[(0,s.eW)((0,l.v_)(e.$t("button.cancel")),1)])),_:1}),(0,s.bF)(r,{type:"primary",onClick:i.submitEdit},{default:(0,s.k6)((()=>[(0,s.eW)((0,l.v_)(e.$t("button.save")),1)])),_:1},8,["onClick"])])),default:(0,s.k6)((()=>[(0,s.bF)(C,{model:o.editForm,"label-width":"auto"},{default:(0,s.k6)((()=>[(0,s.bF)(y,{gutter:24},{default:(0,s.k6)((()=>[(0,s.bF)(v,{span:6},{default:(0,s.k6)((()=>[(0,s.bF)(k,{label:e.$t("data.user.table.superuser")},{default:(0,s.k6)((()=>[(0,s.bF)(_,{modelValue:o.editForm.superuser,"onUpdate:modelValue":t[4]||(t[4]=e=>o.editForm.superuser=e),onChange:i.handleSuperUserChange},null,8,["modelValue","onChange"])])),_:1},8,["label"])])),_:1}),(0,s.bF)(v,{span:6},{default:(0,s.k6)((()=>[(0,s.bF)(k,{label:e.$t("data.user.table.trust")},{default:(0,s.k6)((()=>[(0,s.bF)(_,{modelValue:o.editForm.trusted,"onUpdate:modelValue":t[5]||(t[5]=e=>o.editForm.trusted=e),onChange:i.handleTrustedChange},null,8,["modelValue","onChange"])])),_:1},8,["label"])])),_:1}),(0,s.bF)(v,{span:6},{default:(0,s.k6)((()=>[(0,s.bF)(k,{label:e.$t("data.user.table.block")},{default:(0,s.k6)((()=>[(0,s.bF)(_,{modelValue:o.editForm.blocked,"onUpdate:modelValue":t[6]||(t[6]=e=>o.editForm.blocked=e),onChange:i.handleBlockedChange},null,8,["modelValue","onChange"])])),_:1},8,["label"])])),_:1}),(0,s.bF)(v,{span:18},{default:(0,s.k6)((()=>[(0,s.bF)(k,{label:e.$t("data.user.table.warns")},{default:(0,s.k6)((()=>[(0,s.bF)(w,{modelValue:o.editForm.warns,"onUpdate:modelValue":t[7]||(t[7]=e=>o.editForm.warns=e),min:0},null,8,["modelValue"])])),_:1},8,["label"])])),_:1}),(0,s.bF)(v,{span:18},{default:(0,s.k6)((()=>[(0,s.bF)(k,{label:e.$t("data.user.table.petal")},{default:(0,s.k6)((()=>[(0,s.bF)(w,{modelValue:o.editForm.petal,"onUpdate:modelValue":t[8]||(t[8]=e=>o.editForm.petal=e)},null,8,["modelValue"])])),_:1},8,["label"])])),_:1}),(0,s.bF)(v,{span:24},{default:(0,s.k6)((()=>[(0,s.bF)(k,{label:e.$t("data.user.table.sender_data")},{default:(0,s.k6)((()=>[(0,s.bF)(u,{type:"textarea",resize:"none",modelValue:o.senderDataString,"onUpdate:modelValue":t[9]||(t[9]=e=>o.senderDataString=e),rows:6,placeholder:e.$t("data.input.json_data")},null,8,["modelValue","placeholder"])])),_:1},8,["label"])])),_:1})])),_:1})])),_:1},8,["model"])])),_:1},8,["modelValue","title"])],64)}var T={data(){const{t:e}=(0,v.s9)();return{editForm:{sender_id:"",warns:0,petal:0,superuser:!1,trusted:!1,blocked:!1,sender_data:{}},senderList:[],editDialogVisible:!1,selectedPrefix:"",selectedStatus:"",platformIdPart:"",senderDataString:"",currentPage:1,pageSize:20,totalItems:0,debounceTimer:null,loading:!1,cancelTokenSource:_.A.CancelToken.source(),t:e}},mounted(){this.refreshData()},beforeUnmount(){this.cancelTokenSource.cancel("Component unmounted")},methods:{debouncedRefresh(){clearTimeout(this.debounceTimer),this.debounceTimer=setTimeout((()=>{this.refreshData()}),500)},async refreshData(){this.currentPage=1,await this.fetchData()},async fetchData(){this.loading=!0;try{const e=await _.A.get("/api/sender",{cancelToken:this.cancelTokenSource.token,params:{prefix:this.selectedPrefix||void 0,status:this.selectedStatus||void 0,id:this.platformIdPart||void 0,page:this.currentPage,size:this.pageSize}});200===e.status&&(this.senderList=e.data.sender_list,this.totalItems=e.data.total||0)}catch(e){_.A.isCancel(e)?console.log("Request canceled"):k.nk.error(this.t("message.error.fetch")+e)}finally{this.loading=!1}},handlePageChange(e){this.currentPage=e,this.fetchData()},handleSuperUserChange(e){e&&(this.editForm.trusted=!1,this.editForm.blocked=!1)},handleTrustedChange(e){e&&(this.editForm.superuser=!1,this.editForm.blocked=!1)},handleBlockedChange(e){e&&(this.editForm.superuser=!1,this.editForm.trusted=!1)},editSender(e){Object.assign(this.editForm,{sender_id:e.sender_id,superuser:e.superuser,trusted:e.trusted,blocked:e.blocked,warns:e.warns,petal:e.petal,sender_data:e.sender_data?{...e.sender_data}:{}}),this.senderDataString=JSON.stringify(this.editForm.sender_data,null,2),this.editDialogVisible=!0},async submitEdit(){let e;try{e=JSON.parse(this.senderDataString)}catch(s){k.nk.error(this.t("data.message.invalid_json"))}const{sender_id:t,...a}=this.editForm;a.sender_data=e;try{await _.A.post(`/api/sender/${t}/edit`,a),k.nk.success(this.t("data.message.success.edit")),this.editDialogVisible=!1,this.fetchData()}catch(n){k.nk.error(this.t("message.error.fetch")+n.message)}},confirmDelete(e){this.$confirm(this.t("data.user.confirm.message",{sender_id:e.sender_id}),this.t("confirm.warning"),{confirmButtonText:this.t("button.confirm"),cancelButtonText:this.t("button.cancel"),type:"warning"}).then((()=>{this.deleteSender(e)})).catch((()=>{}))},async deleteSender(e){try{await _.A.post(`/api/sender/${e.sender_id}/delete`),k.nk.success(this.t("data.message.success.delete")),this.fetchData()}catch(t){k.nk.error(this.t("message.error.fetch")+t.message)}}}};const D=(0,y.A)(T,[["render",A],["__scopeId","data-v-a4721e16"]]);var W=D,I={components:{SessionManager:x,UserManager:W},setup(){const e=(0,r.KR)("session");return{activeCard:e}}};const P=(0,y.A)(I,[["render",i],["__scopeId","data-v-e717473c"]]);var E=P},8595:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return y}});var s=a(6768),n=a(4232);const o={class:"log-viewer-container"},i={class:"filter-container"},r={class:"filter-top-row"},l={class:"left-controls"},d={class:"right-controls"},c={class:"auto-scroll-label"},u={class:"filter-bottom-row"},h={class:"log-viewer",ref:"logViewer"},g={key:0,class:"log-viewer-placeholder"};function m(e,t,a,m,b,p){const f=(0,s.g2)("el-input"),_=(0,s.g2)("el-button"),k=(0,s.g2)("el-switch");return(0,s.uX)(),(0,s.CE)("div",o,[(0,s.Lk)("div",i,[(0,s.Lk)("div",r,[(0,s.Lk)("div",l,[(0,s.bF)(f,{modelValue:b.searchText,"onUpdate:modelValue":t[0]||(t[0]=e=>b.searchText=e),placeholder:e.$t("logs.input.search"),class:"log-search-input",onInput:p.handleSearch,clearable:""},null,8,["modelValue","placeholder","onInput"]),(0,s.bF)(_,{class:"log-refresh-button",onClick:p.refreshLog,title:e.$t("logs.button.refresh"),circle:""},{default:(0,s.k6)((()=>t[2]||(t[2]=[(0,s.Lk)("i",{class:"mdi mdi-refresh"},null,-1)]))),_:1},8,["onClick","title"])]),(0,s.Lk)("div",d,[(0,s.bF)(k,{modelValue:b.autoScroll,"onUpdate:modelValue":t[1]||(t[1]=e=>b.autoScroll=e)},null,8,["modelValue"]),(0,s.Lk)("span",c,(0,n.v_)(e.$t("logs.switch.auto_scroll")),1)])]),(0,s.Lk)("div",u,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(b.logLevels,((e,t)=>((0,s.uX)(),(0,s.Wv)(_,{key:t,class:(0,n.C4)(["log-level-button",e.toLowerCase(),{active:b.activeLogLevels.includes(e)}]),onClick:t=>p.toggleLogLevel(e)},{default:(0,s.k6)((()=>[(0,s.eW)((0,n.v_)(e),1)])),_:2},1032,["class","onClick"])))),128))])]),(0,s.Lk)("div",h,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(b.visibleLogs,((e,t)=>((0,s.uX)(),(0,s.CE)("div",{key:t},[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(e,((e,t)=>((0,s.uX)(),(0,s.CE)("span",{key:t,style:(0,n.Tr)(e.style)},(0,n.v_)(e.text),5)))),128))])))),128)),0===b.visibleLogs.length?((0,s.uX)(),(0,s.CE)("div",g,t[3]||(t[3]=[(0,s.eW)("There are currently no matching logs here..."),(0,s.Lk)("br",null,null,-1),(0,s.eW)("Use the filter box above to adjust the options.")]))):(0,s.Q3)("",!0)],512)])}a(4114),a(8992),a(4520),a(3949),a(7550),a(4603),a(7566),a(8721);var b=a(4373),p=a(1219),f=a(8626),_=a(5931),k={name:"LogsView",data(){const{t:e}=(0,_.s9)();return{logData:"",visibleLogs:[],logViewer:null,logLevels:["DEBUG","INFO","SUCCESS","WARNING","ERROR","CRITICAL"],activeLogLevels:["INFO","SUCCESS","WARNING","ERROR","CRITICAL"],searchText:"",websocket:null,cancelTokenSource:b.A.CancelToken.source(),autoScroll:!0,t:e}},methods:{async authenticateToken(){try{const e=await b.A.get("/api/verify-token",{cancelToken:this.cancelTokenSource.token});200===e.status?this.connectWebSocket():p.nk.error(this.t("message.error.connect.auth"))}catch(e){b.A.isCancel(e)?console.log("Request canceled"):p.nk.error(this.t("message.error.fetch")+e.message)}},async connectWebSocket(){try{const e=await(await fetch("/config.json")).json(),t=e.enable_https;let a=e.api_url;/^https?:\/\//i.test(a)||(a=(t?"https://":"http://")+a);const s=new URL(a),n="https:"===s.protocol?"wss:":"ws:",o=`${n}//${s.hostname}:${s.port}/ws/logs`;this.websocket=new WebSocket(o),this.websocket.onmessage=e=>{this.logData+=e.data+"\n"},this.websocket.onerror=()=>{p.nk.error(this.t("message.error.connect.server"))}}catch(e){p.nk.error(this.t("message.error.connect")+e.message)}},updateLogs:(0,f.debounce)((function(){const e=this.logData.split("\n");let t="";const a=[];e.forEach((e=>{/^\[.*?\]\[.*?\]\[.*?\]\[.*?\]:/.test(e)?(t&&a.push(this.formatLogLine(t)),t=e):t+="\n"+e})),t&&a.push(this.formatLogLine(t)),this.visibleLogs=a.filter((e=>{const t=!this.searchText||e.some((e=>e.text.toLowerCase().includes(this.searchText.toLowerCase())));return t&&this.activeLogLevels.some((t=>e.some((e=>e.text.includes(t)))))})),this.visibleLogs.length>16384&&(this.visibleLogs=this.visibleLogs.slice(-16384)),this.autoScroll&&this.logViewer&&setTimeout((()=>{this.logViewer.scrollTop=this.logViewer.scrollHeight}),200)}),500),refreshLog(){this.logData="",this.visibleLogs=[],this.logViewer&&(this.logViewer.scrollTop=0),this.websocket&&this.websocket.readyState===WebSocket.OPEN&&this.websocket.close(),this.authenticateToken()},formatLogLine(e){const t=/^\[([^\]]+)\]\[([^\]]+)\]\[([^\]]+)\]\[([^\]]+)\]:(.*)$/s,a=e.match(t),s="#11a8cd",n="#e5e510",o="#0dbc79";let i="#fff",r="transparent";if(a){const[,e,t,l,d,c]=a;switch(d){case"DEBUG":i="#3b8ec9";break;case"INFO":i="#fff";break;case"SUCCESS":i="#23d18b";break;case"WARNING":i="#f5f543";break;case"ERROR":i="#f14c4c";break;case"CRITICAL":i="#fff",r="#cd3131";break}return[{text:`[${e}]`,style:{color:s}},{text:`[${t}]`,style:{color:n}},{text:`[${l}]`,style:{color:o}},{text:`[${d}]:${c}`,style:{color:i,backgroundColor:r}}]}return[{text:e,style:{color:"#fff"}}]},toggleLogLevel(e){this.activeLogLevels.includes(e)?this.activeLogLevels=this.activeLogLevels.filter((t=>t!==e)):this.activeLogLevels.push(e),this.updateLogs()},handleSearch(){this.updateLogs()}},watch:{logData:"updateLogs"},mounted(){this.logViewer=this.$refs.logViewer,this.authenticateToken()},beforeUnmount(){this.websocket&&this.websocket.close(),this.cancelTokenSource.cancel("Component unmounted")}},v=a(1241);const w=(0,v.A)(k,[["render",m],["__scopeId","data-v-f355c134"]]);var y=w},9390:function(e,t,a){"use strict";a.a(e,(async function(e,s){try{a.r(t);var n=a(8985),o=a(5771),i=a(1241),r=e([o]);o=(r.then?(await r)():r)[0];const l=(0,i.A)(o.A,[["render",n.X]]);t["default"]=l,s()}catch(l){s(l)}}))},6512:function(){},661:function(){},8982:function(){},8806:function(){},4972:function(){},6489:function(){},8598:function(e,t,a){"use strict";a.a(e,(async function(e,s){try{a.d(t,{A:function(){return n.A}});var n=a(8013),o=e([n]);n=(o.then?(await o)():o)[0],s()}catch(i){s(i)}}))},4922:function(e,t,a){"use strict";a.a(e,(async function(e,s){try{a.d(t,{A:function(){return n.A}});var n=a(8853),o=e([n]);n=(o.then?(await o)():o)[0],s()}catch(i){s(i)}}))},5365:function(e,t,a){"use strict";a.a(e,(async function(e,s){try{a.d(t,{A:function(){return n.A}});var n=a(4236),o=e([n]);n=(o.then?(await o)():o)[0],s()}catch(i){s(i)}}))},220:function(e,t,a){"use strict";a.a(e,(async function(e,s){try{a.d(t,{A:function(){return n.A}});var n=a(1083),o=e([n]);n=(o.then?(await o)():o)[0],s()}catch(i){s(i)}}))},2207:function(e,t,a){"use strict";a.a(e,(async function(e,s){try{a.d(t,{A:function(){return n.A}});var n=a(5216),o=e([n]);n=(o.then?(await o)():o)[0],s()}catch(i){s(i)}}))},5875:function(e,t,a){"use strict";a.a(e,(async function(e,s){try{a.d(t,{A:function(){return n.A}});var n=a(2058),o=e([n]);n=(o.then?(await o)():o)[0],s()}catch(i){s(i)}}))},7375:function(e,t,a){"use strict";a.a(e,(async function(e,s){try{a.d(t,{A:function(){return n.A}});var n=a(6656),o=e([n]);n=(o.then?(await o)():o)[0],s()}catch(i){s(i)}}))},5771:function(e,t,a){"use strict";a.a(e,(async function(e,s){try{a.d(t,{A:function(){return n.A}});var n=a(8712),o=e([n]);n=(o.then?(await o)():o)[0],s()}catch(i){s(i)}}))},1326:function(e,t,a){"use strict";a.d(t,{X:function(){return r}});var s=a(6768),n=a(4232);const o={id:"app"},i={key:0,class:"loading-overlay"};function r(e,t,a,r,l,d){const c=(0,s.g2)("AppHeader"),u=(0,s.g2)("LoginModal"),h=(0,s.g2)("SuggestSetPasswordModal"),g=(0,s.g2)("AppSidebar"),m=(0,s.g2)("el-main"),b=(0,s.g2)("el-container"),p=(0,s.gN)("loading");return(0,s.uX)(),(0,s.CE)("div",o,[null===l.userVerified?(0,s.bo)(((0,s.uX)(),(0,s.CE)("div",i,null,512)),[[p,null===l.userVerified]]):(0,s.Q3)("",!0),(0,s.bF)(c,{onToggleSidebar:d.toggleSidebar},null,8,["onToggleSidebar"]),0==l.userVerified?((0,s.uX)(),(0,s.Wv)(u,{key:1})):(0,s.Q3)("",!0),(0,s.bF)(h,{modelValue:l.showSuggestPasswordModal,"onUpdate:modelValue":t[0]||(t[0]=e=>l.showSuggestPasswordModal=e)},null,8,["modelValue"]),l.isSidebarVisible&&l.windowWidth<=1024?((0,s.uX)(),(0,s.CE)("div",{key:2,class:"sidebar-overlay",onClick:t[1]||(t[1]=(...e)=>d.closeSidebar&&d.closeSidebar(...e))})):(0,s.Q3)("",!0),(0,s.bF)(g,{class:(0,n.C4)(["sidebar",{show:l.isSidebarVisible}]),onMenuSelect:d.handleMenuSelect},null,8,["class","onMenuSelect"]),(0,s.bF)(b,{style:{marginTop:"60px"}},{default:(0,s.k6)((()=>[(0,s.bF)(m,{class:(0,n.C4)(["content",{"content-with-sidebar":l.isSidebarVisible,"show-sidebar":l.isSidebarVisible&&l.windowWidth<=1024}]),style:(0,n.Tr)({marginLeft:d.sidebarMarginLeft})},{default:(0,s.k6)((()=>[l.userVerified?((0,s.uX)(),(0,s.Wv)((0,s.$y)(l.currentView),{key:0,userVerified:l.userVerified},null,8,["userVerified"])):(0,s.Q3)("",!0)])),_:1},8,["class","style"]),t[2]||(t[2]=(0,s.Lk)("div",{class:"content-footer"},null,-1))])),_:1})])}},1024:function(e,t,a){"use strict";a.d(t,{X:function(){return d}});var s=a(6768),n=a(4232),o=a(5130);const i={class:"overlay"},r={class:"password-modal"},l={class:"remember-device-container"};function d(e,t,a,d,c,u){const h=(0,s.g2)("el-input"),g=(0,s.g2)("el-checkbox"),m=(0,s.g2)("el-button");return(0,s.uX)(),(0,s.CE)("div",i,[(0,s.Lk)("div",r,[(0,s.Lk)("span",null,(0,n.v_)(e.$t("login.title")),1),(0,s.bF)(h,{modelValue:c.password,"onUpdate:modelValue":t[0]||(t[0]=e=>c.password=e),placeholder:e.$t("login.input.password"),"show-password":"",onKeyup:(0,o.jR)(u.checkPassword,["enter"])},null,8,["modelValue","placeholder","onKeyup"]),(0,s.Lk)("div",l,[(0,s.bF)(g,{modelValue:c.rememberDevice,"onUpdate:modelValue":t[1]||(t[1]=e=>c.rememberDevice=e)},{default:(0,s.k6)((()=>[(0,s.eW)((0,n.v_)(e.$t("login.checkbox.remember")),1)])),_:1},8,["modelValue"]),(0,s.Lk)("span",{class:"forgot-password",onMouseenter:t[2]||(t[2]=e=>c.showTooltip=!0),onMouseleave:t[3]||(t[3]=e=>c.showTooltip=!1)},(0,n.v_)(e.$t("login.forgot_password.text")),33),(0,s.bo)((0,s.Lk)("div",{class:"tooltip"},(0,n.v_)(e.$t("login.forgot_password.tooltip")),513),[[o.aG,c.showTooltip]])]),(0,s.bF)(m,{type:"primary",onClick:u.checkPassword,loading:c.loading,disabled:c.loading},{default:(0,s.k6)((()=>[(0,s.eW)((0,n.v_)(e.$t("login.button.login")),1)])),_:1},8,["onClick","loading","disabled"])])])}},6157:function(e,t,a){"use strict";a.d(t,{X:function(){return w}});var s=a(6768),n=a(4232);const o={class:"card-header"},i={class:"statistics-content"},r={class:"data-group"},l={class:"data-title"},d={class:"data-text"},c={class:"data-group"},u={class:"data-title"},h={class:"data-text"},g={class:"data-group"},m={class:"data-title"},b={ref:"chartContainer",class:"chart-container"},p={class:"card-header"},f={class:"proportion-bar"},_=["title"],k={class:"ranking-total-label"},v={class:"ranking-label"};function w(e,t,a,w,y,C){const x=(0,s.g2)("el-option"),L=(0,s.g2)("el-select"),F=(0,s.g2)("el-card"),S=(0,s.g2)("el-col"),V=(0,s.g2)("el-scrollbar"),$=(0,s.g2)("el-row"),A=(0,s.gN)("loading");return(0,s.uX)(),(0,s.Wv)($,{gutter:20},{default:(0,s.k6)((()=>[(0,s.bF)(S,{span:16,xs:24},{default:(0,s.k6)((()=>[(0,s.bo)(((0,s.uX)(),(0,s.Wv)(F,{"body-style":{height:"400px"}},{default:(0,s.k6)((()=>[(0,s.Lk)("div",o,[(0,s.Lk)("h3",null,[t[1]||(t[1]=(0,s.Lk)("i",{class:"mdi mdi-chart-line"},null,-1)),(0,s.eW)(" "+(0,n.v_)(e.$t("dashboard.analytics.command.title")),1)]),(0,s.bF)(L,{modelValue:y.selectedDays,"onUpdate:modelValue":t[0]||(t[0]=e=>y.selectedDays=e),onChange:C.onTimeRangeChange,class:"time-range-select"},{default:(0,s.k6)((()=>[(0,s.bF)(x,{label:e.$t("dashboard.analytics.command.select.1day"),value:"1"},null,8,["label"]),(0,s.bF)(x,{label:e.$t("dashboard.analytics.command.select.3days"),value:"3"},null,8,["label"]),(0,s.bF)(x,{label:e.$t("dashboard.analytics.command.select.7days"),value:"7"},null,8,["label"]),(0,s.bF)(x,{label:e.$t("dashboard.analytics.command.select.30days"),value:"30"},null,8,["label"]),(0,s.bF)(x,{label:e.$t("dashboard.analytics.command.select.365days"),value:"365"},null,8,["label"])])),_:1},8,["modelValue","onChange"])]),(0,s.Lk)("div",i,[(0,s.Lk)("div",r,[(0,s.Lk)("strong",l,(0,n.v_)(e.$t("dashboard.analytics.command.label.total")),1),(0,s.Lk)("span",d,(0,n.v_)(y.count||0),1)]),(0,s.Lk)("div",c,[(0,s.Lk)("strong",u,(0,n.v_)(e.$t("dashboard.analytics.command.label.average")),1),(0,s.Lk)("span",h,(0,n.v_)(y.averageCount||0),1)]),(0,s.Lk)("div",g,[(0,s.Lk)("strong",m,(0,n.v_)(e.$t("dashboard.analytics.command.label.change_rate")),1),(0,s.Lk)("span",{class:(0,n.C4)({positive:y.changeRate>0,negative:y.changeRate<0,"data-text":0===y.changeRate})},(0,n.v_)(y.changeRate>0?`+${y.changeRate}%`:0===y.changeRate?"0%":`${y.changeRate}%`),3)])]),(0,s.Lk)("div",b,null,512)])),_:1})),[[A,y.loading]])])),_:1}),(0,s.bF)(S,{span:8,xs:24},{default:(0,s.k6)((()=>[(0,s.bo)(((0,s.uX)(),(0,s.Wv)(F,{"body-style":{height:"400px"}},{default:(0,s.k6)((()=>[(0,s.Lk)("div",p,[(0,s.Lk)("h3",null,[t[2]||(t[2]=(0,s.Lk)("i",{class:"mdi mdi-format-list-numbered"},null,-1)),(0,s.eW)(" "+(0,n.v_)(e.$t("dashboard.analytics.platform.title")),1)])]),(0,s.Lk)("div",f,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(y.commandStats,(e=>((0,s.uX)(),(0,s.CE)("div",{key:e.prefix,class:"proportion-segment",style:(0,n.Tr)({width:Math.round(e.count/y.count*100*100)/100+"%",backgroundColor:C.getColorByIndex(e.prefix)}),title:`${e.prefix}: ${e.count} (${Math.round(e.count/y.count*100*100)/100}%)`},null,12,_)))),128))]),(0,s.Lk)("div",k,[(0,s.Lk)("strong",null,(0,n.v_)(e.$t("dashboard.analytics.command.label.total")),1),(0,s.Lk)("span",null,(0,n.v_)(y.count||0),1)]),(0,s.bF)(V,{height:"260px"},{default:(0,s.k6)((()=>[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(y.commandStats,((e,t)=>((0,s.uX)(),(0,s.CE)("div",{key:e.prefix,class:"ranking-item"},[(0,s.Lk)("span",{style:(0,n.Tr)({backgroundColor:C.getColorByIndex(e.prefix),color:"#fff",borderRadius:"100%",padding:"6px 10px",display:"inline-block",marginRight:"8px"})},(0,n.v_)(t+1),5),(0,s.Lk)("div",v,[(0,s.Lk)("strong",null,(0,n.v_)(e.prefix),1),(0,s.Lk)("span",null,(0,n.v_)(e.count),1)])])))),128))])),_:1})])),_:1})),[[A,y.loading]])])),_:1})])),_:1})}},4326:function(e,t,a){"use strict";a.d(t,{X:function(){return A}});var s=a(6768),n=a(4232);const o={class:"data-title"},i={class:"data-text"},r={class:"data-title"},l={class:"data-text"},d={class:"data-title"},c={class:"data-text"},u={class:"data-title"},h={class:"data-text"},g={class:"data-title"},m={class:"data-text"},b={class:"data-title"},p={class:"data-text"},f={class:"data-title"},_={class:"data-text"},k={class:"data-title"},v={class:"data-text"},w={class:"data-text"},y={class:"data-text"},C={class:"memory-dashboards"},x={class:"percentage-value"},L={class:"percentage-label"},F={class:"percentage-value"},S={class:"percentage-label"},V={class:"percentage-value"},$={class:"percentage-label"};function A(e,t,a,A,T,D){const W=(0,s.g2)("el-card"),I=(0,s.g2)("el-col"),P=(0,s.g2)("el-progress"),E=(0,s.g2)("el-row"),M=(0,s.gN)("loading");return(0,s.uX)(),(0,s.Wv)(E,{gutter:20},{default:(0,s.k6)((()=>[(0,s.bF)(I,{span:10,xs:24},{default:(0,s.k6)((()=>[(0,s.bo)(((0,s.uX)(),(0,s.Wv)(W,{"body-style":{height:"200px"}},{default:(0,s.k6)((()=>[(0,s.Lk)("h3",null,[t[0]||(t[0]=(0,s.Lk)("i",{class:"mdi mdi-robot-outline"},null,-1)),(0,s.eW)(" "+(0,n.v_)(e.$t("dashboard.server_info.bot.title")),1)]),(0,s.Lk)("p",null,[(0,s.Lk)("strong",o,(0,n.v_)(e.$t("dashboard.server_info.bot.label.python_version")),1),(0,s.Lk)("span",i,(0,n.v_)(T.bot.python_version||"-"),1)]),(0,s.Lk)("p",null,[(0,s.Lk)("strong",r,(0,n.v_)(e.$t("dashboard.server_info.bot.label.bot_version")),1),(0,s.Lk)("span",l,(0,n.v_)(T.bot.version?T.bot.version.slice(0,6):"-"),1)]),(0,s.Lk)("p",null,[(0,s.Lk)("strong",d,(0,n.v_)(e.$t("dashboard.server_info.bot.label.web_render_status")),1),(0,s.Lk)("span",c,(0,n.v_)(T.bot.web_render_status?e.$t("true"):e.$t("false")),1)]),(0,s.Lk)("p",null,[(0,s.Lk)("strong",u,(0,n.v_)(e.$t("dashboard.server_info.bot.label.running_time")),1),(0,s.Lk)("span",h,(0,n.v_)(D.formatRunningTime(T.bot.running_time||0)),1)])])),_:1})),[[M,T.loading]]),(0,s.bo)(((0,s.uX)(),(0,s.Wv)(W,{"body-style":{height:"160px"}},{default:(0,s.k6)((()=>[(0,s.Lk)("h3",null,[t[1]||(t[1]=(0,s.Lk)("i",{class:"mdi mdi-laptop"},null,-1)),(0,s.eW)(" "+(0,n.v_)(e.$t("dashboard.server_info.system.title")),1)]),(0,s.Lk)("p",null,[(0,s.Lk)("strong",g,(0,n.v_)(e.$t("dashboard.server_info.system.label.machine")),1),(0,s.Lk)("span",m,(0,n.v_)(T.os.system||"-")+" "+(0,n.v_)(T.os.machine?"-":"")+" "+(0,n.v_)(T.os.machine||""),1)]),(0,s.Lk)("p",null,[(0,s.Lk)("strong",b,(0,n.v_)(e.$t("dashboard.server_info.system.label.version")),1),(0,s.Lk)("span",p,(0,n.v_)(T.os.version||"-"),1)]),(0,s.Lk)("p",null,[(0,s.Lk)("strong",f,(0,n.v_)(e.$t("dashboard.server_info.system.label.boot_time")),1),(0,s.Lk)("span",_,(0,n.v_)(D.formatTime(T.os.boot_time||0)),1)])])),_:1})),[[M,T.loading]])])),_:1}),(0,s.bF)(I,{span:14,xs:24},{default:(0,s.k6)((()=>[(0,s.bo)(((0,s.uX)(),(0,s.Wv)(W,{"body-style":{height:"420px"}},{default:(0,s.k6)((()=>[(0,s.Lk)("h3",null,[t[2]||(t[2]=(0,s.Lk)("i",{class:"mdi mdi-memory"},null,-1)),(0,s.eW)(" "+(0,n.v_)(e.$t("dashboard.server_info.cpu.title")),1)]),(0,s.Lk)("p",null,[(0,s.Lk)("strong",k,(0,n.v_)(e.$t("dashboard.server_info.cpu.label.brand")),1)]),(0,s.Lk)("p",null,[(0,s.Lk)("span",v,(0,n.v_)(T.cpu.cpu_brand||"-"),1)]),(0,s.Lk)("h3",null,[t[3]||(t[3]=(0,s.Lk)("i",{class:"mdi mdi-sd"},null,-1)),(0,s.eW)(" "+(0,n.v_)(e.$t("dashboard.server_info.memory.title")),1)]),(0,s.Lk)("p",null,[(0,s.Lk)("span",w,(0,n.v_)(T.memory.used?T.memory.used.toFixed():0)+" MB / "+(0,n.v_)(T.memory.total?T.memory.total.toFixed():0)+" MB",1)]),(0,s.Lk)("h3",null,[t[4]||(t[4]=(0,s.Lk)("i",{class:"mdi mdi-server-outline"},null,-1)),(0,s.eW)(" "+(0,n.v_)(e.$t("dashboard.server_info.disk.title")),1)]),(0,s.Lk)("p",null,[(0,s.Lk)("span",y,(0,n.v_)(T.disk.used?T.disk.used.toFixed(1):0)+" GB / "+(0,n.v_)(T.disk.total?T.disk.total.toFixed(1):0)+" GB",1)]),t[5]||(t[5]=(0,s.Lk)("br",null,null,-1)),(0,s.Lk)("div",C,[(0,s.bF)(P,{type:"dashboard",percentage:T.cpu.cpu_percent?T.cpu.cpu_percent.toFixed(1):0,color:D.getProgressColor(T.cpu.cpu_percent)},{default:(0,s.k6)((({percentage:t})=>[(0,s.Lk)("span",x,(0,n.v_)(t)+"%",1),(0,s.Lk)("span",L,(0,n.v_)(e.$t("dashboard.server_info.cpu.title")),1)])),_:1},8,["percentage","color"]),(0,s.bF)(P,{type:"dashboard",percentage:T.memory.percent?T.memory.percent.toFixed(1):0,color:D.getProgressColor(T.memory.percent)},{default:(0,s.k6)((({percentage:t})=>[(0,s.Lk)("span",F,(0,n.v_)(t)+"%",1),(0,s.Lk)("span",S,(0,n.v_)(e.$t("dashboard.server_info.memory.title")),1)])),_:1},8,["percentage","color"]),(0,s.bF)(P,{type:"dashboard",percentage:T.disk.percent?T.disk.percent.toFixed(1):0,color:D.getProgressColor(T.disk.percent)},{default:(0,s.k6)((({percentage:t})=>[(0,s.Lk)("span",V,(0,n.v_)(t)+"%",1),(0,s.Lk)("span",$,(0,n.v_)(e.$t("dashboard.server_info.disk.title")),1)])),_:1},8,["percentage","color"])])])),_:1})),[[M,T.loading]])])),_:1})])),_:1})}},4573:function(e,t,a){"use strict";a.d(t,{X:function(){return d}});var s=a(6768),n=a(4232);const o={class:"editor-container"},i={class:"editor-body"},r={class:"editor-footer"},l={class:"editor-actions"};function d(e,t,a,d,c,u){const h=(0,s.g2)("el-tab-pane"),g=(0,s.g2)("el-tabs"),m=(0,s.g2)("codemirror"),b=(0,s.g2)("el-button"),p=(0,s.gN)("loading");return(0,s.bo)(((0,s.uX)(),(0,s.CE)("div",o,[(0,s.bF)(g,{modelValue:c.activeTab,"onUpdate:modelValue":t[0]||(t[0]=e=>c.activeTab=e),onTabClick:u.handleTabClick},{default:(0,s.k6)((()=>[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(c.configFiles,(e=>((0,s.uX)(),(0,s.Wv)(h,{key:e,label:e,name:e},null,8,["label","name"])))),128))])),_:1},8,["modelValue","onTabClick"]),(0,s.Lk)("div",i,[(0,s.bF)(m,{ref:"editor",modelValue:c.editorContent,"onUpdate:modelValue":t[1]||(t[1]=e=>c.editorContent=e),options:c.editorOptions},null,8,["modelValue","options"])]),(0,s.Lk)("div",r,[(0,s.Lk)("div",l,[(0,s.bF)(b,{type:"warning",onClick:u.resetConfig},{default:(0,s.k6)((()=>[t[2]||(t[2]=(0,s.Lk)("i",{class:"mdi mdi-restart"},null,-1)),(0,s.eW)(" "+(0,n.v_)(e.$t("button.reset")),1)])),_:1},8,["onClick"]),(0,s.bF)(b,{type:"success",onClick:u.applyConfig},{default:(0,s.k6)((()=>[t[3]||(t[3]=(0,s.Lk)("i",{class:"mdi mdi-content-save-outline"},null,-1)),(0,s.eW)(" "+(0,n.v_)(e.$t("button.apply")),1)])),_:1},8,["onClick"])])])])),[[p,c.loading]])}},9470:function(e,t,a){var s={"./AboutView.vue":[1673],"./ChatView.vue":[6579],"./ConfigView.vue":[6246],"./DashboardView.vue":[3778],"./DataView.vue":[5461],"./EmptyView.vue":[2472,472],"./LogsView.vue":[8595],"./SettingView.vue":[9390]};function n(e){if(!a.o(s,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=s[e],n=t[0];return Promise.all(t.slice(1).map(a.e)).then((function(){return a(n)}))}n.keys=function(){return Object.keys(s)},n.id=9470,e.exports=n},4235:function(e,t,a){var s={"./AboutView.vue":[1673],"./ChatView.vue":[6579],"./ConfigView.vue":[6246],"./DashboardView.vue":[3778],"./DataView.vue":[5461],"./EmptyView.vue":[2472,472],"./LogsView.vue":[8595],"./SettingView.vue":[9390]};function n(e){if(!a.o(s,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=s[e],n=t[0];return Promise.all(t.slice(1).map(a.e)).then((function(){return a(n)}))}n.keys=function(){return Object.keys(s)},n.id=4235,e.exports=n},6031:function(e,t,a){"use strict";e.exports=a.p+"img/akaribot_logo.9946705f.png"},186:function(e){"use strict";e.exports=JSON.parse('{"about.button.locale":"Help Translate","about.button.repo.main":"Main Project","about.button.repo.webui":"WebUI","about.button.sponsor":"Sponsor Us","about.quote":"A multifunctional, multilingual, multiplatform asynchronous chatbot","about.star.tooltip":"Your star means a lot to us!","button.apply":"Save","button.cancel":"Cancel","button.confirm":"Confirm","button.reset":"Reset","button.save":"Save","chat.button.reset":"Clear Session","chat.button.send":"Send","chat.chatbox.text.prompt1.prefix":"Use","chat.chatbox.text.prompt1.suffix":"command for help","chat.chatbox.text.prompt2.prefix":"Press","chat.chatbox.text.prompt2.suffix":"to send message","chat.chatbox.text.prompt3.prefix":"Press","chat.chatbox.text.prompt3.suffix":"for new line","chat.chatbox.title":"Hi! I\'m AkariBot","chat.external_link.confirm.message":"You are about to visit an external link: {url}. Are you sure?","chat.external_link.confirm.title":"External Link Warning","chat.input.send":"Send a message...","chat.status.tooltip.connected":"Connected","chat.status.tooltip.connecting":"Connecting","chat.status.tooltip.disconnected":"Disconnected","chat.title":"Chat","config.message.save.success":"Configuration updated successfully","confirm.message":"Are you sure?","confirm.warning":"Warning","dashboard.analytics.command.chart.command":"Command Count","dashboard.analytics.command.label.average":"Average","dashboard.analytics.command.label.change_rate":"Change Rate","dashboard.analytics.command.label.total":"Total","dashboard.analytics.command.select.1day":"1 Day","dashboard.analytics.command.select.30days":"30 Days","dashboard.analytics.command.select.365days":"365 Days","dashboard.analytics.command.select.3days":"3 Days","dashboard.analytics.command.select.7days":"7 Days","dashboard.analytics.command.title":"Command Analytics","dashboard.analytics.platform.title":"Platform Command Analytics","dashboard.server_info.bot.label.bot_version":"Bot Version","dashboard.server_info.bot.label.python_version":"Python Version","dashboard.server_info.bot.label.running_time":"Running Time","dashboard.server_info.bot.label.web_render_status":"WebRender Status","dashboard.server_info.bot.title":"Bot","dashboard.server_info.cpu.label.brand":"Model","dashboard.server_info.cpu.title":"CPU","dashboard.server_info.disk.title":"Disk","dashboard.server_info.memory.title":"Memory","dashboard.server_info.system.label.boot_time":"Boot Time","dashboard.server_info.system.label.machine":"Architecture","dashboard.server_info.system.label.version":"Version","dashboard.server_info.system.title":"System","dashboard.server_info.text.format_time":"{hours} hr {minutes} min {seconds} sec","data.button.delete":"Delete","data.button.edit":"Edit","data.button.refresh":"Refresh","data.button.view":"View","data.input.json_data":"Enter JSON Data...","data.message.invalid_json":"Invalid session data format. Please check the JSON format","data.message.success.delete":"Data successfully deleted","data.message.success.edit":"Data successfully updated","data.select.prefix":"Select Platform Prefix","data.select.status":"Select Status","data.session.confirm.message":"Are you sure you want to delete all data for session {target_id}?","data.session.input.banned_users":"Enter Limited User ID...","data.session.input.custom_admins":"Enter Admin User ID...","data.session.input.modules":"Select Modules...","data.session.input.target_id":"Search Session ID...","data.session.table.block":"Block","data.session.table.banned_users":"Limited Users","data.session.table.custom_admins":"Custom Admins","data.session.table.locale":"Locale","data.session.table.modules":"Modules","data.session.table.modules_list":"Module List","data.session.table.mute":"Mute","data.session.table.operation":"Operations","data.session.table.target_data":"Session Data","data.session.table.target_id":"Session ID","data.session.tag.blocked":"Blocked","data.session.tag.muted":"Muted","data.session.title":"Session Management","setting.select_language.title":"Language","data.session.title.edit_target_data":"Edit Session Data","data.table.status":"Status","data.table.text.detail":"View Details","data.user.confirm.message":"Are you sure you want to delete all data for user {sender_id}?","data.user.input.sender_id":"Search User ID...","data.user.table.block":"Block","data.user.table.petal":"Petals","data.user.table.sender_data":"User Data","data.user.table.sender_id":"User ID","data.user.table.superuser":"Superuser","data.user.table.trust":"Trust","data.user.table.warns":"Warns","data.user.tag.blocked":"Blocked","data.user.tag.superuser":"Superuser","data.user.tag.trusted":"Trusted","data.user.title":"User Management","data.user.title.edit_sender_data":"Edit User Data","example":"Hello, world!","false":"False","header.button.doc":"Help Docs","login.button.login":"Login","login.checkbox.remember":"Remember Me","login.forgot_password.text":"Forgot Password","login.forgot_password.tooltip":"Please go to the server, open \\"assets/private/api\\" directory, delete \\".password\\" file, and reset your password.","login.input.password":"Enter Password","login.message.abuse":"Too many failed attempts. Please try again later.","login.message.failed":"Incorrect password. Please try again.","login.message.success":"Login successful","login.title":"Log in to continue","logs.button.refresh":"Refresh Logs","logs.input.search":"Search logs...","logs.switch.auto_scroll":"Auto Scroll","message.error.connect":"Connection failed: ","message.error.connect.auth":"Authentication failed","message.error.connect.server":"Connection to server lost","message.error.fetch":"Request failed: ","no":"No","setting.change_password.button.clear_password":"Clear","setting.change_password.button.set_password":"Set","setting.change_password.button.update_password":"Update","setting.change_password.confirm.message":"Are you sure you want to clear the password?","setting.change_password.input.confirm_password":"Confirm","setting.change_password.input.new_password":"New","setting.change_password.input.old_password":"Old","setting.change_password.input.set_password":"Set","setting.change_password.message.failed":"Incorrect password. Please try again.","setting.change_password.message.success.clear":"Password cleared","setting.change_password.message.success.update":"Password updated successfully","setting.change_password.title":"WebUI Password","setting.change_password.validate.confirm_password":"Please confirm the new password","setting.change_password.validate.inconsistent":"Passwords do not match","setting.change_password.validate.new_password":"Please enter a new password","setting.change_password.validate.old_password":"Please enter the old password","setting.restart_bot.button.restart":"Restart","setting.restart_bot.confirm.title":"Restart Confirmation","setting.restart_bot.loading.text":"Restarting... Please do not refresh this page.","setting.restart_bot.message.failed":"Waiting timeout. Please check the bot status.","setting.restart_bot.title":"Restart Bot","sidebar.item.about":"About","sidebar.item.chat":"Chat","sidebar.item.config":"Configuration","sidebar.item.dashboard":"Dashboard","sidebar.item.data":"Data Management","sidebar.item.logs":"Logs","sidebar.item.setting":"More Settings","suggest_set_password.button.cancel":"Maybe Later","suggest_set_password.button.confirm":"Go to Settings","suggest_set_password.checkbox.no_more_prompt":"Don\'t remind me again","suggest_set_password.text":"No password is currently set. If you plan to access this panel over the internet, please go to \\"More Settings\\" and set a password to ensure security.","suggest_set_password.title":"Recommand to Set a Password","true":"True","unknown":"Unknown","yes":"Yes"}')},4016:function(e){"use strict";e.exports=JSON.parse('{"about.button.locale":"帮助翻译","about.button.repo.main":"主项目","about.button.repo.webui":"WebUI","about.button.sponsor":"赞助我们","about.quote":"多功能、多语言、多平台支持的异步聊天机器人","about.star.tooltip":"你的 Star 对我们非常重要！","button.apply":"应用","button.cancel":"取消","button.confirm":"确定","button.reset":"重置","button.save":"保存","chat.button.reset":"清空会话","chat.button.send":"发送","chat.chatbox.text.prompt1.prefix":"使用","chat.chatbox.text.prompt1.suffix":"命令查看帮助","chat.chatbox.text.prompt2.prefix":"按下","chat.chatbox.text.prompt2.suffix":"发送消息","chat.chatbox.text.prompt3.prefix":"按下","chat.chatbox.text.prompt3.suffix":"换行","chat.chatbox.title":"你好！我是 AkariBot","chat.external_link.confirm.message":"你正在前往外部链接：{url}，你确定吗？","chat.external_link.confirm.title":"外部链接警告","chat.input.send":"发送消息……","chat.status.tooltip.connected":"已连接","chat.status.tooltip.connecting":"连接中","chat.status.tooltip.disconnected":"未连接","chat.title":"聊天","config.message.save.success":"配置更新成功","confirm.message":"你确定吗？","confirm.warning":"警告","dashboard.analytics.command.chart.command":"命令数量","dashboard.analytics.command.label.average":"平均命令数","dashboard.analytics.command.label.change_rate":"改变率","dashboard.analytics.command.label.total":"总命令数","dashboard.analytics.command.select.1day":"过去 1 天","dashboard.analytics.command.select.30days":"过去 30 天","dashboard.analytics.command.select.365days":"过去 365 天","dashboard.analytics.command.select.3days":"过去 3 天","dashboard.analytics.command.select.7days":"过去 7 天","dashboard.analytics.command.title":"命令统计","dashboard.analytics.platform.title":"平台命令统计","dashboard.server_info.bot.label.bot_version":"机器人版本","dashboard.server_info.bot.label.python_version":"Python 版本","dashboard.server_info.bot.label.running_time":"运行时间","dashboard.server_info.bot.label.web_render_status":"WebRender 就绪","dashboard.server_info.bot.title":"机器人","dashboard.server_info.cpu.label.brand":"型号","dashboard.server_info.cpu.title":"CPU","dashboard.server_info.disk.title":"磁盘","dashboard.server_info.memory.title":"内存","dashboard.server_info.system.label.boot_time":"启动时间","dashboard.server_info.system.label.machine":"架构","dashboard.server_info.system.label.version":"版本","dashboard.server_info.system.title":"系统","dashboard.server_info.text.format_time":"{hours} 小时 {minutes} 分 {seconds} 秒","data.button.delete":"删除","data.button.edit":"编辑","data.button.refresh":"刷新","data.button.view":"查看","data.input.json_data":"请输入 JSON 数据……","data.message.invalid_json":"会话数据格式错误，请检查 JSON 格式","data.message.success.delete":"删除数据成功","data.message.success.edit":"修改数据成功","data.select.prefix":"选择平台前缀","data.select.status":"选择状态","data.session.confirm.message":"你确定要删除会话 {target_id} 的所有数据吗？","data.session.input.banned_users":"请输入受限用户 ID……","data.session.input.custom_admins":"请输入管理员用户 ID……","data.session.input.modules":"请选择模块……","data.session.input.target_id":"搜索会话 ID……","data.session.table.block":"封禁","data.session.table.banned_users":"受限用户","data.session.table.custom_admins":"自定义管理员","data.session.table.locale":"语言","data.session.table.modules":"模块","data.session.table.modules_list":"模块列表","data.session.table.mute":"禁言","data.session.table.operation":"操作","data.session.table.target_data":"会话数据","data.session.table.target_id":"会话 ID","data.session.tag.blocked":"已封禁","data.session.tag.muted":"已禁言","data.session.title":"会话管理","data.session.title.edit_target_data":"编辑会话数据","data.table.status":"状态","data.table.text.detail":"查看详情","data.user.confirm.message":"你确定要删除用户 {sender_id} 的所有数据吗？","data.user.input.sender_id":"搜索用户 ID……","data.user.table.block":"封禁","data.user.table.petal":"花瓣","data.user.table.sender_data":"用户数据","data.user.table.sender_id":"用户 ID","data.user.table.superuser":"超级用户","data.user.table.trust":"信任","data.user.table.warns":"警告次数","data.user.tag.blocked":"已封禁","data.user.tag.superuser":"超级用户","data.user.tag.trusted":"已信任","data.user.title":"用户管理","data.user.title.edit_sender_data":"编辑用户数据","example":"你好世界！","false":"否","header.button.doc":"帮助文档","login.button.login":"登录","login.checkbox.remember":"记住登录状态","login.forgot_password.text":"忘记密码","login.forgot_password.tooltip":"请前往服务端，进入“assets/private/api”目录，删除“.password”文件后重新设置密码。","login.input.password":"输入密码","login.message.abuse":"登录失败次数过多，请稍后再试","login.message.failed":"密码错误，请重新输入","login.message.success":"登录成功","login.title":"登录以继续","logs.button.refresh":"刷新日志","logs.input.search":"搜索日志……","logs.switch.auto_scroll":"自动滚动","message.error.connect":"连接失败：","message.error.connect.auth":"身份验证失败","message.error.connect.server":"与服务端的连接中断","message.error.fetch":"请求失败：","no":"否","setting.change_password.button.clear_password":"清除密码","setting.change_password.button.set_password":"设置密码","setting.change_password.button.update_password":"修改密码","setting.change_password.confirm.message":"你确定要清除密码吗？","setting.change_password.input.confirm_password":"确认密码","setting.change_password.input.new_password":"新密码","setting.change_password.input.old_password":"旧密码","setting.change_password.input.set_password":"设置密码","setting.change_password.message.failed":"密码错误，请重新输入","setting.change_password.message.success.clear":"密码已清除","setting.change_password.message.success.update":"密码修改成功","setting.change_password.title":"界面密码","setting.change_password.validate.confirm_password":"请确认新密码","setting.change_password.validate.inconsistent":"两次密码输入不一致","setting.change_password.validate.new_password":"请输入新密码","setting.change_password.validate.old_password":"请输入旧密码","setting.restart_bot.button.restart":"重启","setting.restart_bot.confirm.title":"重启确认","setting.restart_bot.loading.text":"正在重启……请不要刷新此页面。","setting.restart_bot.message.failed":"等待超时，请检查机器人状态。","setting.restart_bot.title":"重启机器人","setting.select_language.title":"语言","sidebar.item.about":"关于","sidebar.item.chat":"聊天","sidebar.item.config":"配置","sidebar.item.dashboard":"面板","sidebar.item.data":"数据管理","sidebar.item.logs":"日志","sidebar.item.setting":"更多设置","suggest_set_password.button.cancel":"稍后再说","suggest_set_password.button.confirm":"去设置","suggest_set_password.checkbox.no_more_prompt":"不再提示","suggest_set_password.text":"目前暂未设置密码。若你打算在公网访问此面板，为保证服务安全性，请务必前往“更多设置”界面设置一个密码。","suggest_set_password.title":"建议设置密码","true":"是","unknown":"未知","yes":"是"}')},8312:function(e){"use strict";e.exports=JSON.parse('{"about.button.locale":"協助翻譯","about.button.repo.main":"主專案","about.button.repo.webui":"WebUI","about.button.sponsor":"贊助我們","about.quote":"多功能、多語言、多平台支援的非同步聊天機器人","about.star.tooltip":"你的 Star 對我們非常重要！","button.apply":"套用","button.cancel":"取消","button.confirm":"確認","button.reset":"重設","button.save":"儲存","chat.button.reset":"清除對話","chat.button.send":"傳送","chat.chatbox.text.prompt1.prefix":"使用","chat.chatbox.text.prompt1.suffix":"指令查看說明","chat.chatbox.text.prompt2.prefix":"按下","chat.chatbox.text.prompt2.suffix":"傳送訊息","chat.chatbox.text.prompt3.prefix":"按下","chat.chatbox.text.prompt3.suffix":"換行","chat.chatbox.title":"你好！我是 AkariBot","chat.external_link.confirm.message":"你即將前往外部連結：{url}，確定要繼續嗎？","chat.external_link.confirm.title":"外部連結警告","chat.input.send":"傳送訊息……","chat.status.tooltip.connected":"已連線","chat.status.tooltip.connecting":"連線中","chat.status.tooltip.disconnected":"未連線","chat.title":"聊天","config.message.save.success":"設定更新成功","confirm.message":"你確定嗎？","confirm.warning":"警告","dashboard.analytics.command.chart.command":"指令數量","dashboard.analytics.command.label.average":"平均指令數","dashboard.analytics.command.label.change_rate":"變化率","dashboard.analytics.command.label.total":"總指令數","dashboard.analytics.command.select.1day":"過去 1 天","dashboard.analytics.command.select.30days":"過去 30 天","dashboard.analytics.command.select.365days":"過去 365 天","dashboard.analytics.command.select.3days":"過去 3 天","dashboard.analytics.command.select.7days":"過去 7 天","dashboard.analytics.command.title":"指令統計","dashboard.analytics.platform.title":"平台指令統計","dashboard.server_info.bot.label.bot_version":"機器人版本","dashboard.server_info.bot.label.python_version":"Python 版本","dashboard.server_info.bot.label.running_time":"執行時間","dashboard.server_info.bot.label.web_render_status":"WebRender 就緒","dashboard.server_info.bot.title":"機器人","dashboard.server_info.cpu.label.brand":"型號","dashboard.server_info.cpu.title":"CPU","dashboard.server_info.disk.title":"磁碟","dashboard.server_info.memory.title":"記憶體","dashboard.server_info.system.label.boot_time":"開機時間","dashboard.server_info.system.label.machine":"架構","dashboard.server_info.system.label.version":"版本","dashboard.server_info.system.title":"系統","dashboard.server_info.text.format_time":"{hours} 小時 {minutes} 分 {seconds} 秒","data.button.delete":"刪除","data.button.edit":"編輯","data.button.refresh":"重新整理","data.button.view":"檢視","data.input.json_data":"請輸入 JSON 資料……","data.message.invalid_json":"會話資料格式錯誤，請檢查 JSON 格式","data.message.success.delete":"資料刪除成功","data.message.success.edit":"資料修改成功","data.select.prefix":"選擇平台前綴","data.select.status":"選擇狀態","data.session.confirm.message":"你確定要刪除會話 {target_id} 的所有資料嗎？","data.session.input.custom_admins":"請輸入管理員使用者 ID……","data.session.input.modules":"請選擇模組……","data.session.input.target_id":"搜尋會話 ID……","data.session.table.block":"封鎖","data.session.table.banned_users":"受限使用者","data.session.table.custom_admins":"自訂管理員","data.session.table.locale":"語言","data.session.table.modules":"模組","data.session.table.modules_list":"模組清單","data.session.table.mute":"禁言","data.session.table.operation":"操作","data.session.table.target_data":"會話資料","data.session.table.target_id":"會話 ID","data.session.tag.blocked":"已封鎖","data.session.tag.muted":"已禁言","data.session.title":"會話管理","data.session.title.edit_target_data":"編輯會話資料","data.table.status":"狀態","data.table.text.detail":"查看詳情","data.user.confirm.message":"你確定要刪除使用者 {sender_id} 的所有資料嗎？","data.user.input.sender_id":"搜尋使用者 ID……","data.user.table.block":"封鎖","data.user.table.petal":"花瓣","data.user.table.sender_data":"使用者資料","data.user.table.sender_id":"使用者 ID","data.user.table.superuser":"超級使用者","data.user.table.trust":"信任","data.user.table.warns":"警告次數","data.user.tag.blocked":"已封鎖","data.user.tag.superuser":"超級使用者","data.user.tag.trusted":"已信任","data.user.title":"使用者管理","data.user.title.edit_sender_data":"編輯使用者資料","example":"你好世界！","false":"否","header.button.doc":"說明文件","login.button.login":"登入","login.checkbox.remember":"記住登入狀態","login.forgot_password.text":"忘記密碼","login.forgot_password.tooltip":"請前往伺服器端，進入「assets/private/api」目錄，刪除「.password」檔案後重新設定密碼。","login.input.password":"輸入密碼","login.message.abuse":"登入失敗次數過多，請稍後再試","login.message.failed":"密碼錯誤，請重新輸入","login.message.success":"登入成功","login.title":"登入以繼續","logs.button.refresh":"重新整理日誌","logs.input.search":"搜尋日誌……","logs.switch.auto_scroll":"自動捲動","message.error.connect":"連線失敗：","message.error.connect.auth":"驗證失敗","message.error.connect.server":"與伺服器的連線中斷","message.error.fetch":"請求失敗：","no":"否","setting.change_password.button.clear_password":"清除密碼","setting.change_password.button.set_password":"設定密碼","setting.change_password.button.update_password":"變更密碼","setting.change_password.confirm.message":"你確定要清除密碼嗎？","setting.change_password.input.confirm_password":"確認密碼","setting.change_password.input.new_password":"新密碼","setting.change_password.input.old_password":"舊密碼","setting.change_password.input.set_password":"設定密碼","setting.change_password.message.failed":"密碼錯誤，請重新輸入","setting.change_password.message.success.clear":"密碼已清除","setting.change_password.message.success.update":"密碼變更成功","setting.change_password.title":"介面密碼","setting.change_password.validate.confirm_password":"請確認新密碼","setting.change_password.validate.inconsistent":"兩次密碼輸入不一致","setting.change_password.validate.new_password":"請輸入新密碼","setting.change_password.validate.old_password":"請輸入舊密碼","setting.restart_bot.button.restart":"重新啟動","setting.restart_bot.confirm.title":"重新啟動確認","setting.restart_bot.loading.text":"正在重新啟動……請勿重新整理此頁面。","setting.restart_bot.message.failed":"等待逾時，請檢查機器人狀態。","setting.restart_bot.title":"重新啟動機器人","setting.select_language.title":"語言","sidebar.item.about":"關於","sidebar.item.chat":"聊天","sidebar.item.config":"設定","sidebar.item.dashboard":"儀表板","sidebar.item.data":"資料管理","sidebar.item.logs":"日誌","sidebar.item.setting":"更多設定","suggest_set_password.button.cancel":"稍後再說","suggest_set_password.button.confirm":"前往設定","suggest_set_password.checkbox.no_more_prompt":"不再提示","suggest_set_password.text":"目前尚未設定密碼。若你打算透過公網存取此面板，為確保服務安全性，請務必前往「更多設定」頁面設定密碼。","suggest_set_password.title":"建議設定密碼","true":"是","unknown":"未知","yes":"是"}')}},t={};function a(s){var n=t[s];if(void 0!==n)return n.exports;var o=t[s]={id:s,loaded:!1,exports:{}};return e[s].call(o.exports,o,o.exports,a),o.loaded=!0,o.exports}a.m=e,function(){var e="function"===typeof Symbol?Symbol("webpack queues"):"__webpack_queues__",t="function"===typeof Symbol?Symbol("webpack exports"):"__webpack_exports__",s="function"===typeof Symbol?Symbol("webpack error"):"__webpack_error__",n=function(e){e&&e.d<1&&(e.d=1,e.forEach((function(e){e.r--})),e.forEach((function(e){e.r--?e.r++:e()})))},o=function(a){return a.map((function(a){if(null!==a&&"object"===typeof a){if(a[e])return a;if(a.then){var o=[];o.d=0,a.then((function(e){i[t]=e,n(o)}),(function(e){i[s]=e,n(o)}));var i={};return i[e]=function(e){e(o)},i}}var r={};return r[e]=function(){},r[t]=a,r}))};a.a=function(a,i,r){var l;r&&((l=[]).d=-1);var d,c,u,h=new Set,g=a.exports,m=new Promise((function(e,t){u=t,c=e}));m[t]=g,m[e]=function(e){l&&e(l),h.forEach(e),m["catch"]((function(){}))},a.exports=m,i((function(a){var n;d=o(a);var i=function(){return d.map((function(e){if(e[s])throw e[s];return e[t]}))},r=new Promise((function(t){n=function(){t(i)},n.r=0;var a=function(e){e!==l&&!h.has(e)&&(h.add(e),e&&!e.d&&(n.r++,e.push(n)))};d.map((function(t){t[e](a)}))}));return n.r?r:i()}),(function(e){e?u(m[s]=e):c(g),n(l)})),l&&l.d<0&&(l.d=0)}}(),function(){var e=[];a.O=function(t,s,n,o){if(!s){var i=1/0;for(c=0;c<e.length;c++){s=e[c][0],n=e[c][1],o=e[c][2];for(var r=!0,l=0;l<s.length;l++)(!1&o||i>=o)&&Object.keys(a.O).every((function(e){return a.O[e](s[l])}))?s.splice(l--,1):(r=!1,o<i&&(i=o));if(r){e.splice(c--,1);var d=n();void 0!==d&&(t=d)}}return t}o=o||0;for(var c=e.length;c>0&&e[c-1][2]>o;c--)e[c]=e[c-1];e[c]=[s,n,o]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){a.d=function(e,t){for(var s in t)a.o(t,s)&&!a.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}}(),function(){a.f={},a.e=function(e){return Promise.all(Object.keys(a.f).reduce((function(t,s){return a.f[s](e,t),t}),[]))}}(),function(){a.u=function(e){return"js/"+e+".f022943f.js"}}(),function(){a.miniCssF=function(e){}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={},t="webui:";a.l=function(s,n,o,i){if(e[s])e[s].push(n);else{var r,l;if(void 0!==o)for(var d=document.getElementsByTagName("script"),c=0;c<d.length;c++){var u=d[c];if(u.getAttribute("src")==s||u.getAttribute("data-webpack")==t+o){r=u;break}}r||(l=!0,r=document.createElement("script"),r.charset="utf-8",r.timeout=120,a.nc&&r.setAttribute("nonce",a.nc),r.setAttribute("data-webpack",t+o),r.src=s),e[s]=[n];var h=function(t,a){r.onerror=r.onload=null,clearTimeout(g);var n=e[s];if(delete e[s],r.parentNode&&r.parentNode.removeChild(r),n&&n.forEach((function(e){return e(a)})),t)return t(a)},g=setTimeout(h.bind(null,void 0,{type:"timeout",target:r}),12e4);r.onerror=h.bind(null,r.onerror),r.onload=h.bind(null,r.onload),l&&document.head.appendChild(r)}}}(),function(){a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){a.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){a.p="/"}(),function(){var e={524:0};a.f.j=function(t,s){var n=a.o(e,t)?e[t]:void 0;if(0!==n)if(n)s.push(n[2]);else{var o=new Promise((function(a,s){n=e[t]=[a,s]}));s.push(n[2]=o);var i=a.p+a.u(t),r=new Error,l=function(s){if(a.o(e,t)&&(n=e[t],0!==n&&(e[t]=void 0),n)){var o=s&&("load"===s.type?"missing":s.type),i=s&&s.target&&s.target.src;r.message="Loading chunk "+t+" failed.\n("+o+": "+i+")",r.name="ChunkLoadError",r.type=o,r.request=i,n[1](r)}};a.l(i,l,"chunk-"+t,t)}},a.O.j=function(t){return 0===e[t]};var t=function(t,s){var n,o,i=s[0],r=s[1],l=s[2],d=0;if(i.some((function(t){return 0!==e[t]}))){for(n in r)a.o(r,n)&&(a.m[n]=r[n]);if(l)var c=l(a)}for(t&&t(s);d<i.length;d++)o=i[d],a.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return a.O(c)},s=self["webpackChunkwebui"]=self["webpackChunkwebui"]||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))}();var s=a.O(void 0,[504],(function(){return a(1406)}));s=a.O(s)})();
//# sourceMappingURL=app.fecd8411.js.map